/*! nixon 27-02-2015 */
!function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory(jQuery)}(function($){function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();return"area"===nodeName?(map=element.parentNode,mapName=map.name,element.href&&mapName&&"map"===map.nodeName.toLowerCase()?(img=$("img[usemap='#"+mapName+"']")[0],!!img&&visible(img)):!1):(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")}).length}$.ui=$.ui||{},$.extend($.ui,{version:"1.11.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),$.fn.extend({scrollParent:function(includeHidden){var position=this.css("position"),excludeStaticParent="absolute"===position,overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter(function(){var parent=$(this);return excludeStaticParent&&"static"===parent.css("position")?!1:overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"))}).eq(0);return"fixed"!==position&&scrollParent.length?scrollParent:$(this[0].ownerDocument||document)},uniqueId:function(){var uuid=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++uuid)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&$(this).removeAttr("id")})}}),$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName)}}):function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}}),$("<a>").outerWidth(1).jquery||$.each(["Width","Height"],function(i,name){function reduce(elem,size,border,margin){return $.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0,border&&(size-=parseFloat($.css(elem,"border"+this+"Width"))||0),margin&&(size-=parseFloat($.css(elem,"margin"+this))||0)}),size}var side="Width"===name?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};$.fn["inner"+name]=function(size){return void 0===size?orig["inner"+name].call(this):this.each(function(){$(this).css(type,reduce(this,size)+"px")})},$.fn["outer"+name]=function(size,margin){return"number"!=typeof size?orig["outer"+name].call(this,size):this.each(function(){$(this).css(type,reduce(this,size,!0,margin)+"px")})}}),$.fn.addBack||($.fn.addBack=function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}),$("<a>").data("a-b","a").removeData("a-b").data("a-b")&&($.fn.removeData=function(removeData){return function(key){return arguments.length?removeData.call(this,$.camelCase(key)):removeData.call(this)}}($.fn.removeData)),$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),$.fn.extend({focus:function(orig){return function(delay,fn){return"number"==typeof delay?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus(),fn&&fn.call(elem)},delay)}):orig.apply(this,arguments)}}($.fn.focus),disableSelection:function(){var eventType="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(eventType+".ui-disableSelection",function(event){event.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(zIndex){if(void 0!==zIndex)return this.css("zIndex",zIndex);if(this.length)for(var position,value,elem=$(this[0]);elem.length&&elem[0]!==document;){if(position=elem.css("position"),("absolute"===position||"relative"===position||"fixed"===position)&&(value=parseInt(elem.css("zIndex"),10),!isNaN(value)&&0!==value))return value;elem=elem.parent()}return 0}}),$.ui.plugin={add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set)proto.plugins[i]=proto.plugins[i]||[],proto.plugins[i].push([option,set[i]])},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(set&&(allowDisconnected||instance.element[0].parentNode&&11!==instance.element[0].parentNode.nodeType))for(i=0;i<set.length;i++)instance.options[set[i][0]]&&set[i][1].apply(instance.element,args)}}}),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory(jQuery)}(function($){var widget_uuid=0,widget_slice=Array.prototype.slice;return $.cleanData=function(orig){return function(elems){var events,elem,i;for(i=0;null!=(elem=elems[i]);i++)try{events=$._data(elem,"events"),events&&events.remove&&$(elem).triggerHandler("remove")}catch(e){}orig(elems)}}($.cleanData),$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];return name=name.split(".")[1],fullName=namespace+"-"+name,prototype||(prototype=base,base=$.Widget),$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)},$[namespace]=$[namespace]||{},existingConstructor=$[namespace][name],constructor=$[namespace][name]=function(options,element){return this._createWidget?void(arguments.length&&this._createWidget(options,element)):new constructor(options,element)},$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]}),basePrototype=new base,basePrototype.options=$.widget.extend({},basePrototype.options),$.each(prototype,function(prop,value){return $.isFunction(value)?void(proxiedPrototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var returnValue,__super=this._super,__superApply=this._superApply;return this._super=_super,this._superApply=_superApply,returnValue=value.apply(this,arguments),this._super=__super,this._superApply=__superApply,returnValue}}()):void(proxiedPrototype[prop]=value)}),constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix||name:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName}),existingConstructor?($.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)}),delete existingConstructor._childConstructors):base._childConstructors.push(constructor),$.widget.bridge(name,constructor),constructor},$.widget.extend=function(target){for(var key,value,input=widget_slice.call(arguments,1),inputIndex=0,inputLength=input.length;inputLength>inputIndex;inputIndex++)for(key in input[inputIndex])value=input[inputIndex][key],input[inputIndex].hasOwnProperty(key)&&void 0!==value&&(target[key]=$.isPlainObject(value)?$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value):value);return target},$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=widget_slice.call(arguments,1),returnValue=this;return options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options,this.each(isMethodCall?function(){var methodValue,instance=$.data(this,fullName);return"instance"===options?(returnValue=instance,!1):instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?(methodValue=instance[options].apply(instance,args),methodValue!==instance&&void 0!==methodValue?(returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1):void 0):$.error("no such method '"+options+"' for "+name+" widget instance"):$.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'")}:function(){var instance=$.data(this,fullName);instance?(instance.option(options||{}),instance._init&&instance._init()):$.data(this,fullName,new object(options,this))}),returnValue}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0],this.element=$(element),this.uuid=widget_uuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=$.widget.extend({},this.options,this._getCreateOptions(),options),this.bindings=$(),this.hoverable=$(),this.focusable=$(),element!==this&&($.data(element,this.widgetFullName,this),this._on(!0,this.element,{remove:function(event){event.target===element&&this.destroy()}}),this.document=$(element.style?element.ownerDocument:element.document||element),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var parts,curOption,i,options=key;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof key)if(options={},parts=key.split("."),key=parts.shift(),parts.length){for(curOption=options[key]=$.widget.extend({},this.options[key]),i=0;i<parts.length-1;i++)curOption[parts[i]]=curOption[parts[i]]||{},curOption=curOption[parts[i]];if(key=parts.pop(),1===arguments.length)return void 0===curOption[key]?null:curOption[key];curOption[key]=value}else{if(1===arguments.length)return void 0===this.options[key]?null:this.options[key];options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){return this.options[key]=value,"disabled"===key&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!value),value&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;"boolean"!=typeof suppressDisabledCheck&&(handlers=element,element=suppressDisabledCheck,suppressDisabledCheck=!1),handlers?(element=delegateElement=$(element),this.bindings=this.bindings.add(element)):(handlers=element,element=this.element,delegateElement=this.widget()),$.each(handlers,function(event,handler){function handlerProxy(){return suppressDisabledCheck||instance.options.disabled!==!0&&!$(this).hasClass("ui-state-disabled")?("string"==typeof handler?instance[handler]:handler).apply(instance,arguments):void 0}"string"!=typeof handler&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^([\w:-]*)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?delegateElement.delegate(selector,eventName,handlerProxy):element.bind(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.unbind(eventName).undelegate(eventName)},_delay:function(handler,delay){function handlerProxy(){return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];if(data=data||{},event=$.Event(event),event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),event.target=this.element[0],orig=event.originalEvent)for(prop in orig)prop in event||(event[prop]=orig[prop]);return this.element.trigger(event,data),!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===!1||event.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){"string"==typeof options&&(options={effect:options});var hasOptions,effectName=options?options===!0||"number"==typeof options?defaultEffect:options.effect||defaultEffect:method;options=options||{},"number"==typeof options&&(options={duration:options}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&$.effects.effect[effectName]?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue(function(next){$(this)[method](),callback&&callback.call(element[0]),next()})}}),$.widget}),function(factory){"function"==typeof define&&define.amd?define(["jquery","./widget"],factory):factory(jQuery)}(function($){var mouseHandled=!1;return $(document).mouseup(function(){mouseHandled=!1}),$.widget("ui.mouse",{version:"1.11.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event)}).bind("click."+this.widgetName,function(event){return!0===$.data(event.target,that.widgetName+".preventClickEvent")?($.removeData(event.target,that.widgetName+".preventClickEvent"),event.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(event){if(!mouseHandled){this._mouseStarted&&this._mouseUp(event),this._mouseDownEvent=event;var that=this,btnIsLeft=1===event.which,elIsCancel="string"==typeof this.options.cancel&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:!1;return btnIsLeft&&!elIsCancel&&this._mouseCapture(event)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(event)!==!1,!this._mouseStarted)?(event.preventDefault(),!0):(!0===$.data(event.target,this.widgetName+".preventClickEvent")&&$.removeData(event.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(event){return that._mouseMove(event)},this._mouseUpDelegate=function(event){return that._mouseUp(event)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),event.preventDefault(),mouseHandled=!0,!0)):!0}},_mouseMove:function(event){return $.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button?this._mouseUp(event):event.which?this._mouseStarted?(this._mouseDrag(event),event.preventDefault()):(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==!1,this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)),!this._mouseStarted):this._mouseUp(event)},_mouseUp:function(event){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,event.target===this._mouseDownEvent.target&&$.data(event.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(event)),mouseHandled=!1,!1},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(factory){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],factory):factory(jQuery)}(function($){return $.widget("ui.draggable",$.ui.mouse,{version:"1.11.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(key,value){this._super(key,value),"handle"===key&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(event){var document=this.document[0],o=this.options;try{document.activeElement&&"body"!==document.activeElement.nodeName.toLowerCase()&&$(document.activeElement).blur()}catch(error){}return this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(event),this.handle?($(o.iframeFix===!0?"iframe":o.iframeFix).each(function(){$("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css($(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(event){var o=this.options;return this.helper=this._createHelper(event),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),$.ui.ddmanager&&($.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(event,!1),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this._setContainment(),this._trigger("start",event)===!1?(this._clear(),!1):(this._cacheHelperProportions(),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this._mouseDrag(event,!0),$.ui.ddmanager&&$.ui.ddmanager.dragStart(this,event),!0)},_mouseDrag:function(event,noPropagation){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(event,!0),this.positionAbs=this._convertPositionTo("absolute"),!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===!1)return this._mouseUp({}),!1;this.position=ui.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),!1},_mouseStop:function(event){var that=this,dropped=!1;return $.ui.ddmanager&&!this.options.dropBehaviour&&(dropped=$.ui.ddmanager.drop(this,event)),this.dropped&&(dropped=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!dropped||"valid"===this.options.revert&&dropped||this.options.revert===!0||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped)?$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){that._trigger("stop",event)!==!1&&that._clear()}):this._trigger("stop",event)!==!1&&this._clear(),!1},_mouseUp:function(event){return $("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),$.ui.ddmanager&&$.ui.ddmanager.dragStop(this,event),this.element.focus(),$.ui.mouse.prototype._mouseUp.call(this,event)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(event){return this.options.handle?!!$(event.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event])):"clone"===o.helper?this.element.clone().removeAttr("id"):this.element;return helper.parents("body").length||helper.appendTo("parent"===o.appendTo?this.element[0].parentNode:o.appendTo),helper[0]===this.element[0]||/(fixed|absolute)/.test(helper.css("position"))||helper.css("position","absolute"),helper},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_isRootNode:function(element){return/(html|body)/i.test(element.tagName)||element===this.document[0]},_getParentOffset:function(){var po=this.offsetParent.offset(),document=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var p=this.element.position(),scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+(scrollIsRootNode?0:this.scrollParent.scrollTop()),left:p.left-(parseInt(this.helper.css("left"),10)||0)+(scrollIsRootNode?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var over,c,ce,o=this.options,document=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,($(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),c=$(o.containment),ce=c[0],void(ce&&(over="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c))):void(this.containment=null)},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"===d?1:-1,scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"===this.cssPosition?-this.offset.scroll.top:scrollIsRootNode?0:this.offset.scroll.top)*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"===this.cssPosition?-this.offset.scroll.left:scrollIsRootNode?0:this.offset.scroll.left)*mod}},_generatePosition:function(event,constrainPosition){var containment,co,top,left,o=this.options,scrollIsRootNode=this._isRootNode(this.scrollParent[0]),pageX=event.pageX,pageY=event.pageY;return scrollIsRootNode&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),constrainPosition&&(this.containment&&(this.relativeContainer?(co=this.relativeContainer.offset(),containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top]):containment=this.containment,event.pageX-this.offset.click.left<containment[0]&&(pageX=containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<containment[1]&&(pageY=containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>containment[2]&&(pageX=containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>containment[3]&&(pageY=containment[3]+this.offset.click.top)),o.grid&&(top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,pageY=containment?top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3]?top:top-this.offset.click.top>=containment[1]?top-o.grid[1]:top+o.grid[1]:top,left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,pageX=containment?left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2]?left:left-this.offset.click.left>=containment[0]?left-o.grid[0]:left+o.grid[0]:left),"y"===o.axis&&(pageX=this.originalPageX),"x"===o.axis&&(pageY=this.originalPageY)),{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:scrollIsRootNode?0:this.offset.scroll.top),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:scrollIsRootNode?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(type,event,ui){return ui=ui||this._uiHash(),$.ui.plugin.call(this,type,[event,ui,this],!0),"drag"===type&&(this.positionAbs=this._convertPositionTo("absolute")),$.Widget.prototype._trigger.call(this,type,event,ui)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui,inst){var o=inst.options,uiSortable=$.extend({},ui,{item:inst.element});inst.sortables=[],$(o.connectToSortable).each(function(){var sortable=$(this).sortable("instance");sortable&&!sortable.options.disabled&&(inst.sortables.push({instance:sortable,shouldRevert:sortable.options.revert}),sortable.refreshPositions(),sortable._trigger("activate",event,uiSortable))})},stop:function(event,ui,inst){var uiSortable=$.extend({},ui,{item:inst.element});$.each(inst.sortables,function(){this.instance.isOver?(this.instance.isOver=0,inst.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(event),this.instance.options.helper=this.instance.options._helper,"original"===inst.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",event,uiSortable))})},drag:function(event,ui,inst){var that=this;$.each(inst.sortables,function(){var innermostIntersecting=!1,thisSortable=this;this.instance.positionAbs=inst.positionAbs,this.instance.helperProportions=inst.helperProportions,this.instance.offset.click=inst.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(innermostIntersecting=!0,$.each(inst.sortables,function(){return this.instance.positionAbs=inst.positionAbs,this.instance.helperProportions=inst.helperProportions,this.instance.offset.click=inst.offset.click,this!==thisSortable&&this.instance._intersectsWith(this.instance.containerCache)&&$.contains(thisSortable.instance.element[0],this.instance.element[0])&&(innermostIntersecting=!1),innermostIntersecting})),innermostIntersecting?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=$(that).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return ui.helper[0]},event.target=this.instance.currentItem[0],this.instance._mouseCapture(event,!0),this.instance._mouseStart(event,!0,!0),this.instance.offset.click.top=inst.offset.click.top,this.instance.offset.click.left=inst.offset.click.left,this.instance.offset.parent.left-=inst.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=inst.offset.parent.top-this.instance.offset.parent.top,inst._trigger("toSortable",event),inst.dropped=this.instance.element,inst.currentItem=inst.element,this.instance.fromOutside=inst),this.instance.currentItem&&this.instance._mouseDrag(event)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",event,this.instance._uiHash(this.instance)),this.instance._mouseStop(event,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),inst._trigger("fromSortable",event),inst.dropped=!1)
})}}),$.ui.plugin.add("draggable","cursor",{start:function(event,ui,instance){var t=$("body"),o=instance.options;t.css("cursor")&&(o._cursor=t.css("cursor")),t.css("cursor",o.cursor)},stop:function(event,ui,instance){var o=instance.options;o._cursor&&$("body").css("cursor",o._cursor)}}),$.ui.plugin.add("draggable","opacity",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;t.css("opacity")&&(o._opacity=t.css("opacity")),t.css("opacity",o.opacity)},stop:function(event,ui,instance){var o=instance.options;o._opacity&&$(ui.helper).css("opacity",o._opacity)}}),$.ui.plugin.add("draggable","scroll",{start:function(event,ui,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(event,ui,i){var o=i.options,scrolled=!1,scrollParent=i.scrollParentNotHidden[0],document=i.document[0];scrollParent!==document&&"HTML"!==scrollParent.tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+scrollParent.offsetHeight-event.pageY<o.scrollSensitivity?scrollParent.scrollTop=scrolled=scrollParent.scrollTop+o.scrollSpeed:event.pageY-i.overflowOffset.top<o.scrollSensitivity&&(scrollParent.scrollTop=scrolled=scrollParent.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+scrollParent.offsetWidth-event.pageX<o.scrollSensitivity?scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft+o.scrollSpeed:event.pageX-i.overflowOffset.left<o.scrollSensitivity&&(scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(event.pageY-$(document).scrollTop()<o.scrollSensitivity?scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed):$(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity&&(scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(event.pageX-$(document).scrollLeft()<o.scrollSensitivity?scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed):$(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity&&(scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)))),scrolled!==!1&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(i,event)}}),$.ui.plugin.add("draggable","snap",{start:function(event,ui,i){var o=i.options;i.snapElements=[],$(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var $t=$(this),$o=$t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left})})},drag:function(event,ui,inst){var ts,bs,ls,rs,l,r,t,b,i,first,o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--)l=inst.snapElements[i].left,r=l+inst.snapElements[i].width,t=inst.snapElements[i].top,b=t+inst.snapElements[i].height,l-d>x2||x1>r+d||t-d>y2||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)?(inst.snapElements[i].snapping&&inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=!1):("inner"!==o.snapMode&&(ts=Math.abs(t-y2)<=d,bs=Math.abs(b-y1)<=d,ls=Math.abs(l-x2)<=d,rs=Math.abs(r-x1)<=d,ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top-inst.margins.top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left-inst.margins.left)),first=ts||bs||ls||rs,"outer"!==o.snapMode&&(ts=Math.abs(t-y1)<=d,bs=Math.abs(b-y2)<=d,ls=Math.abs(l-x1)<=d,rs=Math.abs(r-x2)<=d,ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top-inst.margins.top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top-inst.margins.top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left-inst.margins.left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left)),!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)&&inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=ts||bs||ls||rs||first)}}),$.ui.plugin.add("draggable","stack",{start:function(event,ui,instance){var min,o=instance.options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});group.length&&(min=parseInt($(group[0]).css("zIndex"),10)||0,$(group).each(function(i){$(this).css("zIndex",min+i)}),this.css("zIndex",min+group.length))}}),$.ui.plugin.add("draggable","zIndex",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;t.css("zIndex")&&(o._zIndex=t.css("zIndex")),t.css("zIndex",o.zIndex)},stop:function(event,ui,instance){var o=instance.options;o._zIndex&&$(ui.helper).css("zIndex",o._zIndex)}}),$.ui.draggable}),function($){$.fn.equalHeights=function(minHeight,maxHeight){return tallest=minHeight?minHeight:0,this.each(function(){$(this).height()>tallest&&(tallest=$(this).height())}),maxHeight&&tallest>maxHeight&&(tallest=maxHeight),this.each(function(){$(this).height(tallest).css("overflow","auto")})}}(jQuery),jQuery(".extra-products-tabs").equalHeights(),jQuery(".extra-products-tabs").click(function(){return this_id=jQuery(this).attr("id"),this_id_arr=this_id.split("_"),tabid=this_id_arr[0],jQuery(this).hasClass("tab_active")?!1:(jQuery(".extra-products-tabs").removeClass("tab_active"),jQuery(this).addClass("tab_active"),jQuery(".extra-products-contents").removeClass("tab_active_contents"),jQuery("#"+tabid+"_tabcontents").addClass("tab_active_contents"),void loadVisibleImg())}),jQuery(".mobile-filter-btn").click(function(e){return e.preventDefault(),jQuery(".filters-container").hasClass("hidden_height")?(jQuery(".filters-sort-mobile-container").addClass("hidden_height"),jQuery(".filters-container").removeClass("hidden_height"),jQuery(".filters-container").removeClass("hidden"),jQuery(".filters-container").addClass("filter-mobile-expanded")):(jQuery(".filters-container").addClass("hidden_height hidden"),jQuery(".hidden_height").removeClass("filter-mobile-expanded")),!1}),jQuery(".mobile-sort-btn").click(function(e){return e.preventDefault(),jQuery(".filters-sort-mobile-container").hasClass("hidden_height")?(jQuery(".filters-container").addClass("hidden_height  hidden"),jQuery(".hidden_height").removeClass("filter-mobile-expanded"),jQuery(".filters-sort-mobile-container").removeClass("hidden_height")):jQuery(".filters-sort-mobile-container").addClass("hidden_height"),!1}),jQuery(".mobile-cat-filter-btn").click(function(e){e.preventDefault();var $filterContainer=jQuery(".filters-container");$filterContainer.hasClass("hidden_height")?($filterContainer.removeClass("hidden_height hidden").addClass("filter-mobile-expanded-cat"),jQuery(".filters-sort-mobile-container").addClass("hidden_height hidden").removeClass("filter-mobile-expanded-cat"),jQuery(this).addClass("active"),jQuery("html, body").animate({scrollTop:jQuery(".filter-mobile-expanded-cat").offset().top},200)):($filterContainer.addClass("hidden_height hidden").removeClass("filter-mobile-expanded-cat"),jQuery(this).removeClass("active"));var knob=jQuery(".switch-knob");if(knob.hasClass("doLeft"))var switchFilter=".filter-switch-on",reverse=".filter-switch-off",floatPos="doRight",removePos="doLeft";else var switchFilter=".filter-switch-off",reverse=".filter-switch-on",floatPos="doLeft",removePos="doRight";return jQuery(reverse).addClass("switch-text-active").removeClass("switch-text"),jQuery(switchFilter).addClass("switch-text").removeClass("switch-text-active"),knob.addClass(floatPos).removeClass(removePos),jQuery(".mobile-cat-sort-btn").removeClass("active"),!1}),jQuery(".mobile-cat-sort-btn").click(function(e){e.preventDefault();var $sortContainer=jQuery(".filters-sort-mobile-container");return $sortContainer.hasClass("hidden_height")?($sortContainer.removeClass("hidden_height hidden").addClass("filter-mobile-expanded-cat"),jQuery(".filters-container").addClass("hidden_height hidden").removeClass("filter-mobile-expanded-cat"),jQuery(this).addClass("active"),jQuery("html, body").animate({scrollTop:jQuery(".filters-sort-mobile-container").offset().top},200)):($sortContainer.addClass("hidden_height hidden").removeClass("filter-mobile-expanded-cat"),jQuery(this).removeClass("active")),jQuery(".mobile-cat-filter-btn").removeClass("active"),!1});var calculateProductsContHeight=function(perRow,containerHeight){var bodyWidth=$("body").width(),container=$(".landing_products_container"),products=container.find(".nix-pcp-col"),productsNumber=products.length;if(container.find(".no-products-inner").length&&(productsNumber=0),"undefined"==typeof containerHeight)var containerHeight=420;if($(".filters-container:not(.landing-mobile-filters)").length>0){var sidebarHeight=jQuery(".filters-column").height(),filterContainer=$(".filters-container");filterContainer.hasClass("show-filter-column")?(bodyWidth>=1205?perRow=3:bodyWidth>=975&&1205>bodyWidth&&(perRow=2),__lpc_height=Math.ceil(productsNumber/perRow)*containerHeight):__lpc_height=jQuery(".landing_products_container").height(),__lpc_height<sidebarHeight&&(__lpc_height=sidebarHeight),filterContainer.css("min-height",__lpc_height-10+"px")}};$("a.filter_knob_link").on("click",function(e){var anchor=$(this),viewType=anchor.attr("data-view"),target=$(e.target),type=anchor.attr("data-ga-group"),event=anchor.attr("data-ga-event"),filterValue=anchor.attr("data-ga-val"),sendGAFilterClick=function(type,event,filterValue){if(ga.loaded&&(null!=type||null!=event||null!=filterValue))try{ga("send","event",type,event,filterValue)}catch(z){}};return"undefined"!=typeof viewType&&"featured"==viewType?void sendGAFilterClick(type,event,filterValue+=" On"):(e.preventDefault(),(target.hasClass("filter_knob_link")||target.hasClass("switch-body"))&&(target=target.find(".switch-knob")),target.hasClass("filter-switch-on")?(turnFiltersOn(),filterValue+=" On"):target.hasClass("filter-switch-off")?(turnFiltersOff(),filterValue+=" Off"):target.hasClass("switch-knob")&&(target.hasClass("doRight")?(turnFiltersOn(),filterValue+=" On"):(turnFiltersOff(),filterValue+=" Off")),sendGAFilterClick(type,event,filterValue),void calculateProductsContHeight())});var turnFiltersOn=function(){var fSwitch=$(".filter-switch"),prodDisplay=$(".products-display");prodDisplay.find(".filter-container").removeClass("hidden"),prodDisplay.find(".landing_products_container").removeClass("full"),fSwitch.find(".filter-switch-on").addClass("switch-text-active").removeClass("switch-text"),fSwitch.find(".filter-switch-off").addClass("switch-text").removeClass("switch-text-active"),fSwitch.find(".switch-knob").addClass("doLeft").removeClass("doRight")},turnFiltersOff=function(){var fSwitch=$(".filter-switch"),prodDisplay=$(".products-display");prodDisplay.find(".filter-container").addClass("hidden"),prodDisplay.find(".landing_products_container").addClass("full"),fSwitch.find(".filter-switch-off").addClass("switch-text-active").removeClass("switch-text"),fSwitch.find(".filter-switch-on").addClass("switch-text").removeClass("switch-text-active"),fSwitch.find(".switch-knob").addClass("doRight").removeClass("doLeft")};jQuery(".two-cols").click(function(){calculateProductsContHeight(2,275),jQuery(".nix-pcp-col").addClass("nix-pcp-2col"),jQuery(".upper_line").hide(),jQuery("html, body").animate({scrollTop:jQuery(".nix-pcp-col").eq(0).offset().top},200)}),jQuery(".one-col").click(function(){calculateProductsContHeight(1),jQuery(".nix-pcp-col").removeClass("nix-pcp-2col"),jQuery(".upper_line").removeAttr("style"),jQuery("html, body").animate({scrollTop:jQuery(".nix-pcp-col").eq(0).offset().top},200)}),jQuery(window).resize($.debounce(500,function(){calculateProductsContHeight(),new_window=jQuery(window).width(),new_window>768&&jQuery(".nix-pcp-col").removeClass("nix-pcp-2col"),new_window>992?(jQuery(".filters-container").addClass("hidden_height"),jQuery(".filters-container").removeClass("filter-mobile-expanded"),jQuery(".filters-container").removeClass("filter-mobile-expanded-cat"),jQuery(".filter-switch-on").hasClass("switch-text-active")&&jQuery(".filter-switch-on").length>0?(jQuery(".filters-container").addClass("show-filter-column"),jQuery(".filters-container").removeClass("hidden_height")):jQuery(".filters-container").addClass("hidden_height"),jQuery(".filters-sort-mobile-container").addClass("hidden_height")):jQuery(".filter-switch-on").hasClass("switch-text-active")&&jQuery(".filter-switch-on").length>0&&(jQuery(".filters-container").removeClass("show-filter-column"),jQuery(".filters-container").addClass("filter-mobile-expanded-cat"))})),isTablet()&&(jQuery(".filter-by").on("click",function(event){$li=jQuery(this).children(".selected"),$(".sort-options").toggle(),event.preventDefault()}),jQuery(".sort-options").on("click",function(){$t=jQuery(this),$t.hasClass("selected")||(jQuery(".placeholder").text($t.text()),jQuery(".selected").removeClass("selected"),$t.addClass("selected"))}));var loader='<div id="heroloading" class="loading"></div>',CLIENT=window.CLIENT||{};CLIENT.product={altImageIndex:0,isMobile:!1,init:function(){"undefined"!=typeof CLIENT.Decorator&&CLIENT.Decorator.addAfterHeaderLoad(CLIENT.product.checkIfSkuInFavorites),CLIENT.product.toggleColorSku(),CLIENT.product.hoverColorSku(),CLIENT.product.toggleSizeSku(),CLIENT.product.addToCart.init(),CLIENT.product.addToFavorites.init(),CLIENT.product.loadAltColorCarouselElements(),CLIENT.product.bindZoomCursor(),CLIENT.product.desktop.bindVideo(),CLIENT.Category.bindCarouselProductHotSpot(),CLIENT.Category.bindQuickshopLinksAll(),enquire.register("screen and (min-width: 768px)",{deferSetup:!0,setup:function(){CLIENT.product.loadHero("desktop"),CLIENT.product.desktop.bindColorSlideData()},match:function(){CLIENT.product.desktop.init(),CLIENT.product.desktop.bindAltHeroSwitch(),CLIENT.product.desktop.bindZoom(),CLIENT.product.desktop.bindStickyCrumbs(),CLIENT.product.backgroundImages(),CLIENT.Social.desktop.bindAll()},unmatch:function(){CLIENT.product.desktop.unbindAllClick(),CLIENT.Social.desktop.unbindAll(),CLIENT.product.desktop.unbindStickyCrumbs()}}),enquire.register("screen and (max-width: 767px)",{deferSetup:!0,setup:function(){CLIENT.product.loadHero("mobile"),CLIENT.product.mobile.bindColorSlideData()},match:function(){CLIENT.product.mobile.init(),CLIENT.product.mobile.stickTheButtons(),CLIENT.product.mobile.bindZoom(),CLIENT.product.backgroundImages(),CLIENT.product.updateMobilePdpSlider(),CLIENT.product.mobile.socialResizer(),CLIENT.product.mobile.removeStoryBgImage()},unmatch:function(){CLIENT.product.mobile.unbindZoom(),CLIENT.product.mobile.socialResizerRemove()}})},initQuickshop:function(){"undefined"!=typeof CLIENT.Decorator&&CLIENT.Decorator.addAfterHeaderLoad(CLIENT.product.checkIfSkuInFavorites),CLIENT.product.toggleColorSku(),CLIENT.product.hoverColorSku(),CLIENT.product.toggleSizeSku(),CLIENT.product.addToCart.initQuickshop(),CLIENT.product.addToFavorites.init(),CLIENT.product.loadAltColorCarouselElements(),enquire.register("screen and (min-width: 768px)",{deferSetup:!0,setup:function(){CLIENT.product.loadHero("desktop"),CLIENT.product.desktop.bindColorSlideData()},match:function(){CLIENT.product.desktop.init(),CLIENT.product.desktop.bindAltHeroSwitch()},unmatch:function(){CLIENT.product.desktop.unbindAllClick()}}),enquire.register("screen and (max-width: 767px)",{deferSetup:!0,setup:function(){CLIENT.product.loadHero("mobile"),CLIENT.product.mobile.bindColorSlideData()},match:function(){CLIENT.product.mobile.init()},unmatch:function(){}})},replaceContents:function(o,c){$.Log.debug("CLIENT.product.replaceContents"),0!=$(o).length&&$(o).html(c)},desktop:{init:function(){CLIENT.product.isMobile=!1,$("html").addClass("desktop").removeClass("mobile")},bindColorSlideData:function(){var $browseThumbWrapper=$("#prodselectthumbs");return $browseThumbWrapper.hasClass("more-than-12")?void CLIENT.product.bindColorSlide("desktop"):!1},bindAltHeroSwitch:function(){$("#desktop-hero").on("click",".alt-thumb",function(){$.Log.debug(".alt-thumb click");var altSrc,heroImg=$("#prod-hero"),el=$(this);el.hasClass("active")||(altSrc=el.find(".minithumbimg").attr("data-hero"),heroImg.attr("src",altSrc),$(".alt-images").find(".active").removeClass("active"),el.addClass("active"),CLIENT.Social.refreshPinterestButton($("#socialUrl").data("value"),$("#prod-hero").attr("src"),$("#socialDescription").data("value")))})},unbindAltHeroSwitch:function(){$("#desktop-hero").off("click",".alt-thumb")},bindZoom:function(){$("#desktop-hero").on("click","#prod-hero",function(){var heroPath=$(this).attr("src"),heroDiv=$("#desktop-hero").closest(".relative"),zoomPath=heroPath.replace("hero","zoom"),imgAlt=$(this).attr("alt"),zoomHeight=heroDiv.outerHeight();$("#heroloading").remove(),heroDiv.append(loader),heroDiv.prepend('<div id="productzoom" class="col-sm-12" style="height: '+zoomHeight+'px"></div>');var zoomDiv=$("#productzoom");zoomDiv.append('<a href="#" class="button primary" id="prodzoomclose"></a><div id="productzoominner"><img src="'+zoomPath+'" id="productzoomimg" alt="'+imgAlt+'" title="'+imgAlt+'"/></div>'),$("#productzoomimg").load(function(){$("#heroloading").remove(),$(this).click(function(event){event.stopPropagation()}),zoomDiv.fadeIn(function(){var zoomOffsetTop=-1*zoomDiv.offset().top,zoomOffsetBottom=zoomDiv.offset().top+20;$("#productzoomimg").draggable({axis:"y",containment:[0,zoomOffsetTop,0,zoomOffsetBottom],scroll:!1})}),$("body").on("click",function(){$("#productzoomimg").is(":visible")&&CLIENT.product.desktop.closeZoom()}),$("body").on("keyup",function(e){27==e.which&&CLIENT.product.desktop.closeZoom()}),$("#pdp-hook").on("click touchstart","#prodzoomclose",function(){return CLIENT.product.desktop.closeZoom(),!1})}).error(function(){alert("there was an error loading the image:\n"+zoomPath),$("#heroloading").remove()})})},closeZoom:function(){$("#productzoom").fadeOut(300,function(){$(this).remove()}),$("body").off("click"),$("body").off("keyup"),$("#pdp-hook").off("click","#prodzoomclose")},unbindZoom:function(){$("#desktop-hero").off("click")},unbindAllClick:function(){$("#desktop-hero").off("click")},bindVideo:function(){var iframeBegin,iframeFrame,iframeFull,vidContainerOut=$("#media-video"),$vidButton=$("#play-video"),vidContainer=$vidButton.closest(".pdp-wrapper-vert"),containerHeight=vidContainer.outerHeight(),iframeTop=(containerHeight-440)/2,iframeHeight=440,iframeWidth=780,vidURL=$vidButton.attr("href"),sizeReset=!1,nativeContent=(vidContainerOut.html(),!1),widthHeight="";return"undefined"==typeof vidURL?!0:(440>=containerHeight&&!Modernizr.touch&&(iframeHeight*=.75,iframeWidth*=.75,iframeTop=(containerHeight-iframeHeight)/2,sizeReset=!0),440>=containerHeight&&Modernizr.touch&&(nativeContent=!0),nativeContent||(widthHeight="width="+iframeWidth+" height="+iframeHeight),vidURL.indexOf("vimeo")>-1?(vidURL=vidURL.split("/"),vidURL=vidURL.slice(-1)[0],vidURL="//player.vimeo.com/video/"+vidURL+"?title=0&byline=0&portrait=0&autoplay=1"):(vidURL=vidURL.split("/"),vidURL=vidURL.slice(-1)[0],vidURL.indexOf("watch")>-1&&(vidURL=vidURL.replace("watch?v=","")),vidURL="//www.youtube.com/embed/"+vidURL+"?rel=0&enablejsapi=1&autoplay=1&origin=http://www.nixon.com"),iframeBegin='<div class="pdp-video-wrapper"><div class="pdp-close"></div>',iframeFrame='<iframe src="'+vidURL+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen id="pdp-video-iframe" class="animate-out" '+widthHeight+"></iframe>",iframeFull=iframeBegin+iframeFrame+"</div>",$(window).ready(function(){nativeContent&&vidContainerOut.after(iframeFrame)}),$vidButton.on("click touch",function(e){return nativeContent?(e.preventDefault(),vidContainerOut.addClass("animate-out").css("z-index",0),$("#pdp-video-iframe").addClass("animate-in").removeClass("animate-out").addClass("video-position"),!1):(e.preventDefault(),$vidButton.addClass("loading").css("z-index",0),vidContainerOut.addClass("noise").css("z-index",6),vidContainer.prepend(iframeFull),$("#pdp-video-iframe").removeClass("animate-out"),$(".pdp-video-wrapper").css("padding-top",iframeTop+"px").fadeIn("slow"),!1)}),vidContainerOut.on("click",".pdp-close",function(){CLIENT.product.desktop.closeVideo()}),$("#pdp-hook").on("click",function(){CLIENT.product.desktop.closeVideo()}),void $(window).resize($.debounce(200,function(){containerHeight=vidContainer.outerHeight(),iframeTop=(containerHeight-440)/2,440>=containerHeight&&!sizeReset?(iframeHeight*=.75,iframeWidth*=.75,sizeReset=!0):containerHeight>440&&sizeReset&&(iframeHeight=440,iframeWidth=770,sizeReset=!1),iframeTop=(containerHeight-iframeHeight)/2,iframeCode='<div class="pdp-video-wrapper"><div class="pdp-close"></div><iframe src="'+vidURL+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen id="pdp-video-iframe" width="'+iframeWidth+'" height="'+iframeHeight+'"></iframe></div>'})))},unbindVideo:function(){$("#play-video").off().removeClass("loading"),$("#media-video").removeClass("noise")},closeVideo:function(){$(".pdp-video-wrapper").fadeOut("400",function(){$(this).remove()}),$("#play-video").removeClass("loading"),$("#media-video").removeClass("noise").css("z-index",0)},bindStickyCrumbs:function(){$(window).ready(function(){var bcwrapper=$("#breadcrumb-pdp-wrapper");bcwrapper.length&&(CLIENT.product.desktop.breadCrumbOffset=bcwrapper.offset().top),CLIENT.product.desktop.bindCrumbsScrollEvent(),CLIENT.product.desktop.weScrolledStickTheProductCrumbs()})},unbindStickyCrumbs:function(){$.Log.debug("unbindStickyCrumbsOnScroll"),CLIENT.product.desktop.unbindCrumbsScrollEvent()},bindCrumbsScrollEvent:function(){$(window).on("scroll.sticky-pdp",$.throttle(25,CLIENT.product.desktop.weScrolledStickTheProductCrumbs))},unbindCrumbsScrollEvent:function(){$(window).off("scroll.sticky-pdp"),CLIENT.product.desktop.unstickTheCrumbs()},weScrolledStickTheProductCrumbs:function(){$("#breadcrumb-pdp-wrapper").length>0&&"undefined"!=typeof CLIENT.product.desktop.breadCrumbOffset&&($(window).scrollTop()>CLIENT.product.desktop.breadCrumbOffset?CLIENT.product.desktop.stickTheCrumbs():CLIENT.product.desktop.unstickTheCrumbs())},stickTheCrumbs:function(){var $breadcrumbs=$("#breadcrumbs");if(!$breadcrumbs.hasClass("fixed")){$breadcrumbs.addClass("fixed");{setTimeout(function(){$breadcrumbs.addClass("fixed-transition")},50)}}},unstickTheCrumbs:function(){var $breadcrumbs=$("#breadcrumbs");$breadcrumbs.hasClass("fixed")&&($breadcrumbs.removeClass("fixed").removeClass("fixed-transition"),$breadcrumbs.removeAttr("style"))}},mobile:{init:function(){CLIENT.product.isMobile=!0,$("html").addClass("mobile").removeClass("desktop")},slideshow:function(){$.Log.debug("CLIENT.product.mobile.slideshow");var sliders=$("#mobilePdpCarousel");sliders.each(function(){var infinite=!0;return $(this).find(".item").length<3&&(infinite=!1),"undefined"!=typeof $(this).data("iosslider")?void $.Log.debug("Slider already setup, can't call it again without destroying it #"+$(this).attr("id")):void $(this).iosSlider({autoSlide:!1,snapToChildren:!0,desktopClickDrag:!0,infiniteSlider:infinite,snapSlideCenter:!0,responsiveSlideContainer:!1,responsiveSlides:!1,navNextSelector:".next",navPrevSelector:".prev",onSlideChange:CLIENT.product.mobile.changeMobileSlideIdentifier,onSlideStart:CLIENT.iosSlider.changeSlideIconActive,onSlideComplete:CLIENT.iosSlider.changeSlideIconDeactive,horizontalSlideLockThreshold:15,verticalSlideLockThreshold:10})})},changeMobileSlideIdentifier:function(args){args.sliderObject.children().removeClass("primary"),args.targetSlideObject.addClass("primary");var pdpHero=$("#productimage").find("img");if(pdpHero.length){var sliderSource=$(args.currentSlideObject).find("img").attr("src");if(sliderSource.length&&-1!=sliderSource.indexOf("category")){var newHero=sliderSource.replace("category","hero");pdpHero.attr("src",newHero);var altImageHolder=$("#productaltimages");altImageHolder.find("li").removeClass("active").removeClass("primary"),altImageHolder.find("img[data-hero='"+newHero+"']").closest("li").addClass("primary active")}}},bindColorSlideData:function(){var $browseThumbWrapper=$("#prodselectthumbs");return $browseThumbWrapper.find(".minithumb").length<6?!1:void CLIENT.product.bindColorSlide("mobile")},stickTheButtons:function(){CLIENT.product.mobile.placeMobileCTAs(),$(window).on("scroll",$.debounce(50,CLIENT.product.mobile.placeMobileCTAs))},fixedTop:!1,placeMobileCTAs:function(){$.Log.debug("CLIENT.product.mobile.placeMobileCTAs");var indicator=$("#cta-indicator");if(indicator.length){var windowTop=$(window).scrollTop(),ctaStick=indicator.offset().top,buttonContainer=$("#product-ctas");windowTop>ctaStick&&!CLIENT.product.mobile.fixedTop?($.Log.debug("windowTop > ctaStick && !CLIENT.product.mobile.fixedTop"),buttonContainer.addClass("scrolled"),CLIENT.product.mobile.fixedTop=!0):ctaStick>windowTop&&($.Log.debug("windowTop < ctaStick"),buttonContainer.removeClass("scrolled"),CLIENT.product.mobile.fixedTop=!1)}else $.Log.debug("#cta-indicator not found")},removeStoryBgImage:function(){$("#the-story").css("background-image","none")},bindZoom:function(){$("#mobile-hero").on("click",".pdp-hotspot",function(e){e.preventDefault();var heroPath=$(this).attr("href"),heroDiv=$("#product-info").closest(".relative"),zoomPath=heroPath.replace("category","hero"),imgAlt=$(this).prev("img").attr("alt"),zoomHeight=$("#mobile-hero").outerHeight()+$(".mobile-row").outerHeight(),zoomDiv='<div id="mobile-zoom" style="height: '+zoomHeight+'px"><div class="pdp-close"></div><img src="'+zoomPath+'" id="mobile-zoom-img" alt="'+imgAlt+'"/></div>';heroDiv.prepend(zoomDiv);var page=$("#page"),mobileZoomImage=$("#mobile-zoom-img"),zoomOffsetBottom=heroDiv.offset().top-$("#breadcrumbp-pdp-wrapper").outerHeight(),zoomOffsetTop=page.offset().top;return mobileZoomImage.draggable({axis:"y",containment:[0,zoomOffsetTop,0,zoomOffsetBottom],scroll:!1}),$("#mobile-zoom").fadeIn("slow"),mobileZoomImage.click(function(event){event.stopPropagation()}),$("#pdp-hook").on("click",".pdp-close",function(){CLIENT.product.mobile.closeZoom()}),page.on("click",function(){$("#mobile-zoom").is(":visible")&&CLIENT.product.mobile.closeZoom()}),!1})},unbindZoom:function(){$("#mobile-hero").off("click",".pdp-hotspot"),$("#mobile-zoom").remove(),$("#page").off("click"),$("#pdp-hook").off("click",".pdp-close")},closeZoom:function(){$("#mobile-zoom").fadeOut(300,function(){$(this).remove()})},socialResizer:function(){$(window).on("resize.social-resizer",function(){var winWidth=$(this).width();$("#olapic-copy-wrapper").hasClass("active")&&($(".social-gallery").outerHeight(winWidth),$("#olapic-copy-wrapper").outerHeight(winWidth))}),$(document).ready(function(){var winWidth=$(window).width();$("#olapic-copy-wrapper").hasClass("active")&&($(".social-gallery").outerHeight(winWidth),$("#olapic-copy-wrapper").outerHeight(winWidth))})},socialResizerRemove:function(){$(window).off("resize.social-resizer"),$(".social-gallery").removeAttr("style"),$("#olapic-copy-wrapper").removeAttr("style")}},getSkuByRefid:function(skurefid){for(sku in CLIENT.product.skumap)if(CLIENT.product.skumap[sku].refid==skurefid)return CLIENT.product.skumap[sku]},updateAltImageData:function(sku){var skuImages=sku.altviewFilenames;if("undefined"!=typeof skuImages){for(var path=CLIENT.product.imageBasePath,newAltImages=[],imgName=sku.productrefid+"-"+sku.colorid+"-view",a=1;a<=skuImages.length;a++)newAltImages.push({src:path+"/mini/"+imgName+a+".png",heroSrc:path+"/hero/"+imgName+a+".jpg",mobileSrc:path+"/category/"+imgName+a+".jpg",zoomSrc:path+"/zoom/"+imgName+a+".jpg",title:sku.name+" - "+sku.color+" | Nixon",count:skuImages.length});CLIENT.product.altImages=newAltImages,CLIENT.product.heroSrc=newAltImages[0].heroSrc,CLIENT.product.zoomSrc=newAltImages[0].zoomSrc}},loadHero:function(device){if($.Log.debug("CLIENT.product.loadHero"),"mobile"==device&&void 0===CLIENT.product.altImages[0]){$.Log.debug("Device is mobile, and no altImages present.");var data='<img src="'+CLIENT.product.heroSrc+'" class="single" />';$("#mobile-hero").append(data),CLIENT.product.mobile.slideshow()}else{var hero=$("#"+device+"-hero");hero.length&&ZC.Base.getAndParseTemplate("pdp-"+device+"-hero",CLIENT.product).done(function(response){hero.append(response),$.Log.debug("loaded pdp-"+device+"-hero"),"mobile"==device?CLIENT.product.setIsMobileHeroReadyForInitTimer(5):$(".product-hero").load(function(){CLIENT.product.addToCart.initOrResetStickyAddToCart(),$.Log.debug("$.stickable.reset(); Hero Image Loaded")})})}},setIsMobileHeroReadyForInitTimer:function(timerCount){setTimeout(function(){var innerFlag=$(".nix-pdp-col");innerFlag.length<1&&2e4>timerCount?CLIENT.product.setIsMobileHeroReadyForInitTimer(timerCount+5):CLIENT.product.mobile.slideshow()},5)},bindZoomCursor:function(){$("#pdp-hook").on("touchstart mousedown","#productzoomimg",function(){$("#productzoomimg").addClass("grabbing")}),$("#pdp-hook").on("touchstop mouseup","#productzoomimg",function(){$("#productzoomimg").removeClass("grabbing")})},bindColorSlide:function(device){var totalWidth,idxScrolls,scrollDir,scrollLeftPos=0,$browseThumbWrapper=$("#prodselectthumbs"),thumbWidth=$browseThumbWrapper.find(".minithumb:eq(0)").outerWidth(),idx=$("#prodselectthumbs .minithumb.active").attr("data-count"),idxScrollLeft=0,$prev=$(".previous-arrow"),$next=$(".next-arrow"),$prodSelectThumbs=$("#prodselectthumbs"),containerWidth=$browseThumbWrapper.outerWidth(),totalThumbs=$browseThumbWrapper.find(".minithumb").length;"mobile"==device?(totalWidth=thumbWidth*$browseThumbWrapper.find(".minithumb").length,idxScrolls=Math.ceil((idx-6)/2)):(totalWidth=thumbWidth*$browseThumbWrapper.find(".product-column").length,idxScrolls=Math.ceil((idx-12)/4));var scrollMax=totalWidth-containerWidth;totalThumbs>12&&$next.show(),idxScrolls>0&&(idxScrollLeft=2*idxScrolls*thumbWidth,$prev.show(),scrollLeftPos=idxScrollLeft,$prodSelectThumbs.animate({scrollLeft:scrollLeftPos},300)),$(".arrow-nav").off().on("click",function(e){return e.preventDefault(),scrollDir=$(this).attr("data-scroll"),"next"==scrollDir?(scrollLeftPos+=2*thumbWidth,scrollLeftPos>scrollMax&&(scrollLeftPos=scrollMax),$prodSelectThumbs.animate({scrollLeft:scrollLeftPos},300),$prev.show(),scrollLeftPos>=scrollMax&&$next.hide(),CLIENT.product.altImageIndex++):(scrollLeftPos-=2*thumbWidth,0>scrollLeftPos&&(scrollLeftPos=0),$prodSelectThumbs.animate({scrollLeft:scrollLeftPos},300),$next.show(),0>=scrollLeftPos&&$prev.hide(),CLIENT.product.altImageIndex--),!1}),$(window).resize($.debounce(200,function(){CLIENT.product.bindColorSlide(device)}))},toggleSizeSku:function(){$(".size-select").length&&$(".size-select").on("click touchstart","li",function(){if($.Log.debug(".size-select click"),$(this).hasClass("active"))$.Log.debug("size already active");else{{var addButton=$(".addbutton"),addButtonPrimary=$("#prodaddtocart"),skuInv=$(this).attr("data-stock"),skuInline=($(this).attr("data-comingsoon"),$(this).attr("data-inventory"),$(this).attr("data-inline")),skuId=$(this).attr("data-skuid");$(this).attr("data-skuindex")}if("false"==skuInline){if("false"==skuInv)return addButton.addClass("disabled"),void addButton.html(addButtonPrimary.attr("data-outofstock"));addButton.removeClass("disabled"),addButton.html(addButtonPrimary.attr("data-addtext"))}"select"!=skuInv&&addButton.hasClass("disabled")&&addButton.removeClass("disabled"),""!==$(".productstatuswrap").html()&&$(".productstatuswrap").html(""),$("#prodinventory").val(skuInv),$("#wishListSkuId"+CLIENT.product.refid).val(skuId),$("#wishListUrl"+CLIENT.product.refid).val(CLIENT.product.prodURL+"?sku="+skuId),$("#prodskuselect").attr("value",skuId),CLIENT.product.checkAddToCart($(this)),$(".skuoption").removeClass("active");
var clickedSizeId=$(this).attr("data-skuid");if(sizeSelectsWithSameSize=$(".skuoption[data-skuid="+clickedSizeId+"]"),sizeSelectsWithSameSize.addClass("active"),CLIENT.Settings.gaEnhancedEC){var skuData=CLIENT.product.getSkuByRefid(clickedSizeId);if("undefined"!=typeof skuData){({id:skuData.productrefid,name:skuData.name,category:$("#formprodselection").find(":input[name='ecCategory']").val(),brand:"Nixon",variant:skuData.colorid,price:skuData.pricedecimal})}}ga("send","event","PDP","Select Size")}})},loadAltColorCarouselElements:function(){$.Log.debug("CLIENT.product.loadCarouselElements()");var carousel=$("#nix-color-carousel"),items=carousel.find(".item");items.length>1?carousel.iosSlider({onSliderLoaded:function(args){current_carousel=args.data.obj,this_indicators=current_carousel.parents(".product-container").find(".upper_line .indicator"),item_nr=this_indicators.length,item_width=100/item_nr,this_indicators.each(function(i,elem){jQuery(elem).css("width",item_width+"%")})},onSlideComplete:function(){CLIENT.product.primaryColorSlideChangedUpdateActiveColorThumb()},startAtSlide:carousel.find(".item.primary").attr("data-count"),snapToChildren:!0,desktopClickDrag:!0,infiniteSlider:!0,snapSlideCenter:!0,responsiveSlideContainer:!1,responsiveSlides:!1,navNextSelector:".next",navPrevSelector:".prev",onSlideChange:CLIENT.iosSlider.changeSlideIdentifier,onSlideStart:CLIENT.iosSlider.changeSlideIconActive,horizontalSlideLockThreshold:15,verticalSlideLockThreshold:10}):items.addClass("single-color-slide")},goToActiveAltColorSlide:function(slideNumber){$.Log.debug("CLIENT.product.goToActiveAltColorSlide()");var carousel=$("#nix-color-carousel");if(carousel.length){var activeSlide=carousel.find(".item.primary");activeSlide.length&&"undefined"!=typeof activeSlide.attr("data-count")&&slideNumber!=activeSlide.attr("data-count")&&carousel.iosSlider("goToSlide",slideNumber)}},primaryColorSlideChangedUpdateActiveColorThumb:function(){$.Log.debug("CLIENT.product.primaryColorSlideChangedUpdateActiveColorThumb()");var currentPrimarySlideNum=$("#nix-color-carousel").find(".item.primary").attr("data-count"),colorThumbToActivate=$(".thumbcontainer").find(".minithumb[data-count="+currentPrimarySlideNum+"]");colorThumbToActivate.trigger("click")},checkAddToCart:function(skuToLoad){$.Log.debug("CLIENT.product.checkAddToCart");var inputInv=$("#prodinventory").val(),addButton=$(".addbutton"),addOption=$("#prodaddoption"),availMsg=$(".current-color-message"),addButtonPrimary=$("#prodaddtocart"),prodComingSoon=!1,prodOnHand=!1;if(prodinline=!0,void 0!==skuToLoad){prodComingSoon=skuToLoad.attr("data-has-coming-soon"),prodOnHand=skuToLoad.attr("data-inventory-onhand"),prodAvailMsg=skuToLoad.attr("data-inventory"),prodinline=skuToLoad.attr("data-inline")}else{$("#prodselectthumbs li.active")}"false"==prodinline&&"false"==prodOnHand?(addOption.attr("disabled",!0),addButton.addClass("disabled"),availMsg.html(prodAvailMsg),addButton.data("btnVal",addButtonPrimary.attr("data-outofstock")),addButton.html(addButtonPrimary.attr("data-outofstock"))):"select"==inputInv?(addOption.removeAttr("disabled"),addButton.removeClass("notify"),addButton.addClass("disabled"),availMsg.html(prodAvailMsg),"false"==prodOnHand?(addButton.data("btnVal",addButtonPrimary.attr("data-notifytext")),addButton.html(addButtonPrimary.attr("data-notifytext"))):(addButton.data("btnVal",addButtonPrimary.attr("data-addtext")),addButton.html(addButtonPrimary.attr("data-addtext")))):"comingSoon"==inputInv?(addOption.attr("disabled",!0),addButton.removeClass("disabled"),addButton.addClass("notify"),addButton.data("btnVal",addButtonPrimary.attr("data-notifytext")),addButton.html(addButtonPrimary.attr("data-notifytext")),availMsg.html(prodAvailMsg)):"false"==inputInv?(addOption.attr("disabled",!0),addButton.removeClass("disabled"),addButton.addClass("notify"),addButton.data("btnVal",addButtonPrimary.attr("data-notifytext")),addButton.html(addButtonPrimary.attr("data-notifytext")),availMsg.html(prodAvailMsg)):(addOption.removeAttr("disabled"),addButton.removeClass("disabled"),addButton.removeClass("notify"),addButton.data("btnVal",addButtonPrimary.attr("data-addtext")),addButton.html(addButtonPrimary.attr("data-addtext")),availMsg.html(prodAvailMsg))},getSkusByColor:function(colorid){$.Log.debug("CLIENT.product.getSkusByColor");for(var skus=CLIENT.product.skumap,matchskus=[],i=0;i<skus.length;i++){var sku=skus[i];sku.colorid==colorid&&matchskus.push(sku)}return matchskus},updateRichRelevanceProduct:function(skuId){"undefined"!=typeof R3_ITEM&&"function"==typeof R3_ITEM.setId&&(R3_ITEM.setId(skuId),R3_COMMON.placementTypes="",r3())},checkIfSkuInFavorites:function(data){var loadedSku=$("#prodskuhidden").val();if("undefined"==typeof loadedSku){loadedSku=$(".size-select li").first().attr("data-skuid");var sizes=$(".size-select").first().find("li"),keepChecking=!0;sizes.each(function(){loadedSku=$(this).attr("data-skuid"),loadedSku.length&&"undefined"!=typeof data.favoriteSkus&&null!=data.favoriteSkus&&-1!=data.favoriteSkus.indexOf(loadedSku)&&1==keepChecking&&($(".addfaves").addClass("working"),keepChecking=!1)})}else loadedSku.length&&"undefined"!=typeof data.favoriteSkus&&null!=data.favoriteSkus&&-1!=data.favoriteSkus.indexOf(loadedSku)&&$(".addfaves").addClass("working")},upColorName:"",hoverColorName:"",upColorInvMsg:"",hoverColorInvMsg:"",upColorInvClass:"",hoverColorInvClass:"",hoverColorSku:function(){var hoverOn=function($hoveredObj){var activeThumb=$(".minithumb.active");CLIENT.product.upColorName=activeThumb.attr("data-color-title"),CLIENT.product.hoverColorName=$hoveredObj.attr("data-color-title"),CLIENT.product.upColorName!=CLIENT.product.hoverColorName&&$(".current-color").html(CLIENT.product.hoverColorName),CLIENT.product.upColorInvMsg=activeThumb.attr("data-inventory-message"),CLIENT.product.hoverColorInvMsg=$hoveredObj.attr("data-inventory-message"),CLIENT.product.upColorInvMsg!=CLIENT.product.hoverColorInvMsg&&$(".current-color-message").html(CLIENT.product.hoverColorInvMsg),CLIENT.product.upColorInvClass=activeThumb.attr("data-inventory-class"),CLIENT.product.hoverColorInvClass=$hoveredObj.attr("data-inventory-class"),CLIENT.product.upColorInvClass!=CLIENT.product.hoverColorInvClass&&CLIENT.product.toggleSkuColorInventoryMessageClass(CLIENT.product.hoverColorInvClass)},hoverOff=function(){var activeThumb=$(".minithumb.active");CLIENT.product.upColorName=activeThumb.attr("data-color-title"),CLIENT.product.upColorInvMsg=activeThumb.attr("data-inventory-message"),CLIENT.product.upColorInvClass=activeThumb.attr("data-inventory-class"),CLIENT.product.upColorName!=CLIENT.product.hoverColorName&&$(".current-color").html(CLIENT.product.upColorName),CLIENT.product.upColorInvMsg!=CLIENT.product.hoverColorInvMsg&&$(".current-color-message").html(CLIENT.product.upColorInvMsg),CLIENT.product.upColorInvClass!=CLIENT.product.hoverColorInvClass&&CLIENT.product.toggleSkuColorInventoryMessageClass(CLIENT.product.upColorInvClass)};Modernizr.touch||$(".minithumb").hover(function(){hoverOn($(this))},function(){hoverOff($(this))})},toggleColorSku:function(){$(".minithumb").on("click",function(){if($.Log.debug("CLIENT.product.toggleColorSku"),CLIENT.product.scrollToTop(),!$(this).hasClass("active")){var skuEl=$(this),skuImg=skuEl.children(".skuthumbimg"),imgSrc=skuImg.attr("src"),imgAlt=skuImg.attr("alt"),prodColor=skuEl.attr("data-color-code"),prodInvMessage=skuEl.attr("data-inventory-message"),prodInvClass=skuEl.attr("data-inventory-class"),prodNew=skuEl.attr("data-has-new"),prodViews=0,prodColorLabel=skuEl.attr("data-color-title"),prodPrice=$(".prodprice").html(),addButton=$("#prodaddtocart"),productStatusWrap=($("#prodaddoption"),$(".productstatuswrap")),currentURL=window.location.href,groupStatus=skuEl.attr("data-multisku-status"),slideNumber=skuEl.attr("data-count");currentSkuId=CLIENT.product.refid+prodColor+"-00",-1!=currentURL.indexOf("?sku")&&(currentURL=currentURL.split("?sku"),currentURL=currentURL[0],currentURL=currentURL+"?sku="+currentSkuId),CLIENT.product.currentURL=currentURL,0==$(this).parents(".quickshop-wrapper").length&&CLIENT.product.updateRichRelevanceProduct(currentSkuId);var thumbContainer=$("#prodselectthumbs");thumbContainer.find(".minithumb").removeClass("active"),clickedColorId=skuEl.attr("data-color-code"),allThumbsOfSameColor=thumbContainer.find("[data-color-code="+clickedColorId+"]"),allThumbsOfSameColor.addClass("active"),productStatusWrap.length&&productStatusWrap.empty();var gaCat,gaSource,skus=CLIENT.product.getSkusByColor(prodColor),colorSettings=CLIENT.product.colorSettings,wrapper=$(this).parents("#pdp-hook");if(wrapper.length&&wrapper.hasClass("quickshop-wrapper")?(gaSource="QuickShop",gaCat=CLIENT.Category.gaCategoryRef):(gaSource="PDP",gaCat=$("#formprodselection").find(":input[name='ecCategory']").val()),CLIENT.Settings.gaEnhancedEC&&"undefined"!=typeof skus&&skus.length>0){var skuData=skus[0];if("undefined"!=typeof skuData){({id:skuData.productrefid,name:skuData.name,category:gaCat,brand:"Nixon",variant:skuData.colorid,price:skuData.pricedecimal})}}if(ga("send","event",gaSource,"Select Color",prodColor),skus.length>0){var sku=skus[0];prodPrice=sku.price;var comingSoon=sku.comingsoon;prodViews="undefined"!=typeof sku.altviews&&null!=sku.altviews?sku.altviews:0}if($("#wishListSkuId"+sku.productrefid).val(sku.refid),$("#wishListUrl"+sku.productrefid).val(CLIENT.product.prodURL+"?sku="+sku.refid),skus.length>1){$(".skuoption").removeClass("active"),$("#prodskuselect").attr("value","");var prodSkuSelect=$(".size-select");prodSkuSelect.attr("data-default-status",groupStatus),prodSkuSelect.children(".skuoption").remove(),addButton.addClass("disabled"),prodSkuSelect.removeClass("error");var keepLookingForFaves=!0;$.each(skus,function(n,o){var stockMsg=o.instock?CLIENT.product.inStockMsg:CLIENT.product.outOfStockMsg,outOfStockClass=o.instock?"":"out-of-stock";prodSkuSelect.append('<li data-skuid="'+o.refid+'" data-inline="'+o.isinline+'" data-stock="'+o.instock+'" data-comingsoon="'+o.comingsoon+'" data-inventory="'+stockMsg+'" class="skuoption '+outOfStockClass+'">'+o.size+"</li>"),ZC.Base.checkElement(CLIENT.Decorator.userData.favoriteSkus)&&1==keepLookingForFaves&&(-1!=CLIENT.Decorator.userData.favoriteSkus.indexOf(o.refid)?($(".addfaves").addClass("working"),keepLookingForFaves=!1):$(".addfaves").removeClass("working"))});var instock=colorSettings[prodColor].instock;$("#prodinventory").val("select")}else{ZC.Base.checkElement(CLIENT.Decorator.userData.favoriteSkus)&&(-1!=CLIENT.Decorator.userData.favoriteSkus.indexOf(currentSkuId)?$(".addfaves").addClass("working"):$(".addfaves").removeClass("working"));var instock=!0;0==sku.instock&&(instock=!1),!instock&&comingSoon&&(instock="comingSoon"),$("#prodskuhidden").val(sku.refid),$("#prodinventory").val(instock)}CLIENT.product.checkAddToCart(skuEl),$(".prodprice").html(0==prodPrice?"":prodPrice),$(".current-color").html(prodColorLabel),$(".current-color-message").html(prodInvMessage),CLIENT.product.toggleSkuColorInventoryMessageClass(prodInvClass),$(".prodnewicon").addClass("true"==prodNew?"":"active");var viewThumbWrapper=$(".viewthumb");viewThumbWrapper.remove();var prodAltImages=$("#productaltimages"),mobileIosSlider=$("#mobilePdpCarousel"),prodImg=$("#productimage"),seeItOnArray=$(".seeiton"),hasSeeItOnThumbs=seeItOnArray.length>0;if(CLIENT.product.updateAltImageData(sku),prodViews>1||hasSeeItOnThumbs){$("#productaltimages .minithumb").removeClass("active");var altImageFilename=null;"undefined"==typeof imgSrc&&(imgSrc="",$.Log.error("No imgSrc for "+currentSkuId));for(var i=0;prodViews>i;i++){altImageFilename=sku.altviewFilenames[i];var altImgBase=imgSrc.substring(0,imgSrc.indexOf(sku.productrefid)),altImageSource=altImgBase.replace("selection","mini");altImageSource+=altImageFilename;var activeClass="";0==i&&(activeClass=" active primary");var dataHero=altImgBase.replace("selection","hero");dataHero+=altImageFilename.replace(".png",".jpg");var dataZoom=altImgBase.replace("selection","zoom");dataZoom+=altImageFilename.replace(".png",".jpg");var thumbHTML='<li class="alt-thumb viewthumb altthumb minithumb item'+activeClass+'" id="altthumb'+prodColor+i+'"> <img src="'+altImageSource+'" ondragstart="return false;" data-hero="'+dataHero+'" data-zoom="'+dataZoom+'" class="minithumbimg" alt="'+imgAlt+'" title="'+imgAlt+'"></li>\n';if(0==i&&prodImg.find("img").attr("src",dataHero),prodAltImages.append(thumbHTML),mobileIosSlider.length){var isPrimary="";if($(window).width()<768&&0==hasSeeItOnThumbs)var primaryFlag=0;else var primaryFlag=prodViews-1;i==primaryFlag&&(isPrimary=" primary");var sliderImageSource=altImgBase.replace("selection","category");sliderImageSource+=altImageFilename.replace("png","jpg");var carouselItem=$("<div/>",{"class":"item viewthumb altthumb"+isPrimary}),carouselImage=$("<img/>",{src:sliderImageSource}),carouselImageHotspot=$("<a/>",{href:sliderImageSource,"class":"pdp-hotspot"});carouselItem.append(carouselImage),carouselItem.append(carouselImageHotspot),1==hasSeeItOnThumbs?mobileIosSlider.find(".slider").prepend(carouselItem):mobileIosSlider.find(".slider").append(carouselItem)}else var setupMobileSlider=!0}1==setupMobileSlider&&($("#mobile-hero").find("img").remove(),CLIENT.product.loadHero("mobile")),mobileIosSlider.length&&(mobileIosSlider.iosSlider("destroy"),CLIENT.product.mobile.slideshow()),1==hasSeeItOnThumbs&&prodAltImages.append(seeItOnArray)}else if(mobileIosSlider.length&&$("#mobile-hero").html('<img src="" />'),sku.altviewFilenames){altImageFilename=sku.altviewFilenames[0];var singleImageSource=imgSrc.substring(0,imgSrc.indexOf(sku.productrefid));if(singleImageSource+=altImageFilename,$(window).width()>768){$.Log.debug("In desktop single image no alt");var dataHero=singleImageSource.replace("selection","hero");dataHero=dataHero.replace(".png",".jpg"),$("#productimage").find("img").attr("src",dataHero)}else{$.Log.debug("In mobile single image no alt");var dataMobile=singleImageSource.replace("selection","hero");dataMobile=dataMobile.replace("png","jpg"),$("#mobile-hero").find("img").attr("src",dataMobile)}}CLIENT.product.goToActiveAltColorSlide.call($(this),slideNumber)}})},scrollToTop:function(){$.Log.debug("mobile scroll to top"),CLIENT.util.isMobile&&$("html, body").animate({scrollTop:0},"300")},toggleSkuColorInventoryMessageClass:function(prodInvClass){var $currentColorMsg=$(".current-color-message");$currentColorMsg.hasClass("out-of-stock")&&"out-of-stock"!=prodInvClass?$currentColorMsg.removeClass("out-of-stock").addClass("in-stock"):$currentColorMsg.hasClass("in-stock")&&"in-stock"!=prodInvClass&&$currentColorMsg.removeClass("in-stock").addClass("out-of-stock")},updateMobilePdpSlider:function(){$.Log.debug("CLIENT.product.updateMobilePdpSlider");var mobileIosSlider=$("#mobilePdpCarousel");mobileIosSlider.length&&"undefined"!=typeof mobileIosSlider.data("iosslider")&&mobileIosSlider.iosSlider("update")},destroyMobilePdpSlider:function(){$.Log.debug("CLIENT.product.updateMobilePdpSlider");var mobileIosSlider=$("#mobilePdpCarousel");mobileIosSlider.length&&"undefined"!=typeof mobileIosSlider.data("iosslider")&&mobileIosSlider.iosSlider("destroy")},buildSizeList:function(){},noSizesUpdateForms:function(){},loadDesktopHeroBySkuAndUpdateAlts:function(){},loadMobileAltViewSlider:function(){},addToCart:{init:function(){CLIENT.product.addToCart.initButtonVars(),CLIENT.product.addToCart.initOrResetStickyAddToCart(),CLIENT.product.addToCart.positionStickyAddToCart(),CLIENT.product.addToCart.bindAddToCartButtons(),CLIENT.product.addToCart.bindAddToCartSubmit(),CLIENT.product.addToCart.bindNotifyMeFormSubmit()},initQuickshop:function(){CLIENT.product.addToCart.initButtonVars(),CLIENT.product.addToCart.bindAddToCartButtons(),CLIENT.product.addToCart.bindAddToCartSubmit(),CLIENT.product.addToCart.bindNotifyMeFormSubmit()},initButtonVars:function(){CLIENT.product.addToCart.addToCartBtns=$(".addbutton"),CLIENT.product.addToCart.addToCartForm=$("#formprodselection"),CLIENT.product.addToCart.addToFavoritesBtns=$(".addfaves"),CLIENT.product.addToCart.notifyMeForm=$("#notifymeform")},resetStickyAddToCart:function(){$(".sticky-add-to-cart").length&&$(".sticky-add-to-cart").stickable.reset()},initOrResetStickyAddToCart:function(){$.Log.debug("$.stickable: initOrResetStickyAddToCart");var $stickyAddToCart=$(".sticky-add-to-cart"),hasStickable=$stickyAddToCart.parent().hasClass("stickable-parent");$stickyAddToCart.length>0&&(hasStickable===!0?($stickyAddToCart.stickable.reset(),$.Log.debug("$.stickable.reset()")):($stickyAddToCart.stickable({bottomId:"product-detail-divider",stickyBreakpoint:992,marginTop:160,marginBottom:94}),$.Log.debug("$.stickable.init()")))},positionStickyAddToCart:function(){CLIENT.product.addToCart.computeAndApplyStickyPosition(),$(window).resize($.debounce(200,function(){CLIENT.product.addToCart.computeAndApplyStickyPosition()}))},computeAndApplyStickyPosition:function(){var containerPosition=$("#olapic-copy-wrapper").offset().left;containerPosition=parseInt(containerPosition,10);var containerPadding=$("#olapic-copy-wrapper").css("padding-right");containerPadding=parseInt(containerPadding,10),$(".sticky-add-to-cart").css("right",containerPosition+containerPadding);var carousel=$("#nix-color-carousel");carousel.iosSlider("update")},bindAddToCartButtons:function(){$.Log.debug("CLIENT.product.addToCart.bindAddToCartButtons"),CLIENT.product.addToCart.addToCartBtns.click(function(){return $.Log.debug(".addbutton click"),$(this).html()==$(this).attr("data-outofstock")||$(this).hasClass("disabled")?($(".size-select").length>0&&0==$(this).find("li.active").length&&($(".productstatuswrap").html(CLIENT.product.selectSize),$(".addbutton").addClass("disabled")),!1):void CLIENT.product.addToCart.addToCartForm.submit()})},disableAddToCartButtons:function(){CLIENT.product.addToCart.addToCartBtns.addClass("disabled")},enableAddToCartButtons:function(){CLIENT.product.addToCart.addToCartBtns.removeClass("disabled")},bindAddToCartSubmit:function(){$.Log.debug("CLIENT.product.addToCart.bindAddToCartSubmit"),CLIENT.product.addToCart.addToCartForm.submit(function(){$.Log.debug("#formprodselection submit");var parms=$(this).serialize();if(CLIENT.product.addToCart.addToCartBtns.first().hasClass("notify"))CLIENT.Modal.ajaxLoadPage(parms,"/product/includes/notify-me.jsp","notify-form-modal");else{CLIENT.product.addToCart.addToCartBtns.addClass("working"),CLIENT.product.addToCart.addProductToCartAjax(parms);var gaCat,gaSource,wrapper=$(this).parents("#pdp-hook");if(wrapper.length&&wrapper.hasClass("quickshop-wrapper")?(gaSource="QuickShop",gaCat=CLIENT.Category.gaCategoryRef):(gaSource="PDP",gaCat=$("#formprodselection").find(":input[name='ecCategory']").val()),CLIENT.Settings.gaEnhancedEC){var skuId="";$("#prodskuselect").length?skuId=$("#prodskuselect").val():$("#prodskuhidden").length&&(skuId=$("#prodskuhidden").val());var skuData=CLIENT.product.getSkuByRefid(skuId);if("undefined"!=typeof skuData){var gaProduct={id:skuData.productrefid,name:skuData.name,category:gaCat,brand:"Nixon",variant:skuData.colorid,price:skuData.pricedecimal,quantity:1};ga("set","&cu",skuData.currencycode),ga("ec:addProduct",gaProduct),ga("ec:setAction","add")}}ga("send","event","Cart","Add to Cart",gaSource)}return!1})},bindNotifyMeCancel:function(){$(".nix-show-close-icon").on("click touchstart",function(){$.Log.debug("close the notify modal"),CLIENT.Modal.forceClosedModal()})},addProductToCartAjax:function(parms){$.ajax({url:CLIENT.Settings.getHost()+"/add-to-cart/",type:"POST",data:parms,cache:!1,success:function(data,textStatus,jqXHR){var response=$($.trim(data)),repairInCart=jqXHR.getResponseHeader("Repair-In-Cart");if("undefined"!=typeof repairInCart&&null!==repairInCart&&-1!=repairInCart.indexOf("true"))if(response.length){var error=$.trim(response.html());$.Log.info(error),$(".productstatuswrap").html(error)}else $.Log.error("We have bigger problems..");else{var updateDecorator=!0;if("productcart"!=response.attr("id")?(response=$('<div id="productcart" class="productstatuswrap clearfix"><div class="productstatusmsg">'+CLIENT.product.addToCartError+"</div></div>"),updateDecorator=!1):CLIENT.product.addToCart.seeWhyAbandonedCart(response),1==updateDecorator){var headerData=[];headerData.success=!0,headerData.cartCount=response[0].children.updatedcount.innerHTML,CLIENT.Decorator.handleDynamicHeaderResponse(headerData)}if(CLIENT.product.isMobile)CLIENT.product.addToCart.addToCartBtns.removeClass("working"),CLIENT.product.addToCart.mobileItemAddedToCartRedirect();else{if(CLIENT.Modal.forceClosedModal(),"undefined"!=typeof response[0].children.prodstatusmsg){$.Log.debug("updating productstatusmsg (error message)");var prodStatusHtml=response[0].children.prodstatusmsg.innerHTML;CLIENT.product.addToCart.desktopItemAddedToCartUpdateUI(prodStatusHtml)}if("undefined"!=typeof response[0].children.prodviewcart){$.Log.debug("updating minicart");var minicartHtml=response[0].children.prodviewcart.innerHTML;CLIENT.Decorator.minicart.updateMiniCartContents(minicartHtml),CLIENT.Decorator.minicart.showMiniCart(),CLIENT.product.addToCart.desktopItemAddedToCartUpdateUI()}}}},error:function(){CLIENT.product.addToCart.addToCartBtns.removeClass("working"),$(".productstatuswrap").html(CLIENT.product.addToCartError),$(".addbutton").removeClass("working"),$.Log.error("An error occurred while adding a product to the cart")}})},seeWhyAbandonedCart:function(response){if(CLIENT.SeeWhy&&"productcart"===response.attr("id"))try{CLIENT.SeeWhy.cartId=response.attr("data-orderid"),CLIENT.SeeWhy.cartTotal=response.attr("data-ordertotal"),CLIENT.SeeWhy.productDescr=$.trim($("#seeWhyDescr").text()),CLIENT.SeeWhy.productColor=$.trim($("#current-color-primary").text()),CLIENT.SeeWhy.cartUrl=CLIENT.Settings.url.secureHost+"/loadcart/"+Base64.encode(CLIENT.SeeWhy.cartId),CLIENT.SeeWhy.cyEvent(3)}catch(err){$.Log.error("Error calling SeeWhy: "+err)}},desktopItemAddedToCartUpdateUI:function(htmlContent){"undefined"!=typeof htmlContent&&($(".productstatuswrap").html(htmlContent),$(".productstatuswrap").show()),CLIENT.product.addToCart.addToCartBtns.text(CLIENT.product.addedMsg);setTimeout(function(){CLIENT.product.addToCart.addToCartBtns.text(CLIENT.product.addToCart.addToCartBtns.attr("data-addtext")),CLIENT.product.addToCart.addToCartBtns.removeClass("working")},3e3)},mobileItemAddedToCartRedirect:function(){document.location.href=CLIENT.Settings.url.secureHost+"/cart/"},bindNotifyMeFormValidation:function(){$.Log.debug("CLIENT.product.addToCart.bindNotifyMeFormValidation"),$("#notifymeform").scrupulous()},bindNotifyMeFormSubmit:function(){$(".nix-overlay-body").on("submit",CLIENT.product.addToCart.notifyMeForm,function(){$.Log.debug("notifyMe form submit");var notifyform=$("#notifymeform"),emailField=notifyform.find(":input[id^=notifyemailfield]");if(emailField.length&&CLIENT.Base.isValidEmail(emailField.val())){ga("send","event","notify_me","click","form_submit");var parms=notifyform.serialize();return $.ajax({url:CLIENT.Settings.url.servlet,type:"POST",dataType:"json",data:parms,success:function(data){$.Log.debug("notifyMe form submit success");var message="";"object"==typeof data&&1==data.SUCCESS?message="<div class='wishlistresponse'>"+CLIENT.Settings.alerts.product.wishlist.success+"</div>":($.Log.debug("$.ajax.success() : response is not an object"),message="<div class='wishlistresponse'>"+CLIENT.Settings.alerts.product.wishlist.failure+"</div>"),CLIENT.product.replaceContents($("#notifymeform"),message),setTimeout(CLIENT.Modal.closeModalWindow,5e3)},error:function(){$.Log.debug("notifyMe form submit fail"),message="<div class='wishlistresponse'><em class='red'>"+CLIENT.Settings.alerts.product.wishlist.failure+"</em></div>",CLIENT.product.replaceContents(CLIENT.product.addToCart.notifyMeForm,message),setTimeout(CLIENT.Modal.closeModalWindow,5e3)}}),!1}})}},addToFavorites:{init:function(){CLIENT.product.addToFavorites.bindAddToFavorites()},bindAddToFavorites:function(){CLIENT.product.addToCart.addToFavoritesBtns.click(function(){$.Log.debug(".addfaves click");var wishListSkuVal=$("#wishListSkuId"+CLIENT.product.refid).val();return"select"==wishListSkuVal||""==wishListSkuVal||"undefined"==wishListSkuVal?($(".productstatuswrap").html(CLIENT.product.wishListSizeMsg),!1):($(".addfaves").addClass("working"),void CLIENT.product.addToFavorites.submitAddToFavorites())})},submitAddToFavorites:function(){$.Log.debug("CLIENT.product.submitAddToFavorites()"),$.ajax({url:$("#prodaddtowishlistform").attr("data-ajaxurl"),cache:!1,type:"POST",data:$("#prodaddtowishlistform").serialize(),success:function(data){data.success!==!0?($.Log.debug("Add to Favorites unexpected response"),$(".productstatuswrap").html(CLIENT.product.addToWishlistError),$(".addfaves").removeClass("working")):CLIENT.Decorator.handleDynamicHeaderResponse(data)},error:function(response){$(".productstatuswrap").html(CLIENT.product.addToWishlistError),$(".addfaves").removeClass("working"),$.Log.debug("CLIENT.product.favorites.submitAddToWishList"+response.statusText)}})}},modalBackgroundImages:function(){var $specsContainer=$("#prod-specs-modal-img");CLIENT.product.isMobile?$specsContainer.css("background-image","none"):$specsContainer.css("background-image","url('"+$specsContainer.attr("data-bkg-desktop")+"')")},backgroundImages:function(){var $relatedContainer=$(".prodrelated"),$videoContainer=$("#media-video"),$theStoryContainer=$("#the-story");CLIENT.product.isMobile?($relatedContainer.css("background-image","url('"+CLIENT.product.familyMobileBG+"')"),$videoContainer.css("background-image","url('"+CLIENT.product.mediaMobileBG+"')"),$theStoryContainer.css("background-image","url('"+CLIENT.product.theStoryMobileBG+"')")):($relatedContainer.css("background-image","url('"+CLIENT.product.familyDesktopBG+"')"),$videoContainer.css("background-image","url('"+CLIENT.product.mediaDesktopBG+"')"),$theStoryContainer.css("background-image","url('"+CLIENT.product.theStoryDesktopBG+"')"))},richRelevanceCallback:function(){var ar=RR.data.JSON.placements,maxSkus=4;if(CLIENT.product.rrMax>0&&(maxSkus=CLIENT.product.rrMax),"undefined"!=typeof ar)var rr1=ar[0],rv1=ar[1];CLIENT.Category.bindRichRelevanceLayers(rr1,rv1),rr1?CLIENT.RichRelevance.loadRecsForSkus(rr1,$("#rr-recommend-container"),maxSkus):$.Log.debug("No products returned for rr1"),rv1?CLIENT.RichRelevance.loadRecsForSkus(rv1,$("#rr-recent-container")):$.Log.debug("No products returned for rv1")}};var CLIENT=window.CLIENT||{};jQuery.fn.reverse=function(){return this.pushStack(this.get().reverse(),arguments)},CLIENT.Category={container:null,categoryRef:null,gaCategoryRef:"uncategorized",vars:{},doRichSort:!1,filterColumnStuck:!1,init:function(){if($.Log.debug("CLIENT.Category.init"),"undefined"!=typeof CLIENT.Decorator&&CLIENT.Decorator.addAfterHeaderLoad(CLIENT.Category.markFavorites),calculateProductsContHeight(),!CLIENT.Category.doRichSort)if($("#category-products").removeClass("hidden"),$(".loading.slow").hide(),CLIENT.iosSlider.init(),CLIENT.Category.thumbnailOpacity(),CLIENT.Category.loadVisibleCarousels(),CLIENT.Category.bindLazyCarouselLoad(),CLIENT.Category.bindCarouselProductHotSpot(),CLIENT.Category.bindFavoriteLinkClick(),CLIENT.Category.sendGaEnhancedImpressions(!1),"SEARCH"==CLIENT.Category.categoryRef){var searchTerm=$.getUrlVar("q");ga("send","event","Search Results","loaded",searchTerm,{nonInteraction:1})}else ga("send","event","Category","loaded","Category",{nonInteraction:1});CLIENT.Category.bindFilterBarEvents(),CLIENT.Category.bindMobilePagination(),CLIENT.Category.bindQuickshopLinksAll(),CLIENT.Category.bindFilterSortButtons(),Modernizr.touch&&$(window).load(function(){$(this).trigger("scroll")}),enquire.register("screen and (min-width: 768px)",{deferSetup:!0,setup:function(){},match:function(){},unmatch:function(){}}),enquire.register("screen and (max-width: 767px)",{deferSetup:!0,setup:function(){},match:function(){},unmatch:function(){}}),enquire.register("screen and (max-width: 1178px)",{deferSetup:!0,setup:function(){}}),$(window).load(function(){CLIENT.Category.initOrResetStickable()})},useRichSort:function(bl){CLIENT.Category.doRichSort=bl},bindFilterBarEvents:function(){$.Log.debug("CLIENT.Category.bindFilterBarEvents"),$(".filters-title").on("click",function(){var obj=$(this),filterOptions=obj.nextAll(".filters-options"),filterTitle=obj.parent(".filters-filters"),open=filterOptions.hasClass("active");open?(filterTitle.removeClass("active"),filterOptions.removeClass("active").slideUp(function(){CLIENT.Category.initOrResetStickable()})):(filterTitle.addClass("active"),filterOptions.addClass("active").slideDown(function(){CLIENT.Category.initOrResetStickable()}))}),$(".filters-reset").on("click",function(){document.location.href=$(this).attr("data-href")}),$(".filters-list").on("click","li",function(){document.location.href=$(this).attr("data-href")})},bindFavoriteLinkClick:function(){$.Log.debug("CLIENT.Category.bindFavoriteLinkClick"),$(".products-container").on("click",".cta-heart",function(){var data={sku:null,url:null,title:null},pc=$(this).parents(".product-container"),image=pc.find(".item.primary img");try{var sku=image.attr("data-skurefid");data.sku=sku}catch(e){}try{var title=pc.find(".prod-details").find(".title").html();data.title=title}catch(e){}try{var url=pc.find("a.product-hotspot:first").attr("data-href");data.url=url}catch(e){}null==data.sku||null==data.title||null==data.url?$.Log.error("Add to favorites failed, missing data."):CLIENT.Category.addToFavorites.call($(this),data)})},addToFavorites:function(data){var cta=$(this);cta.hasClass("in-favorites")||$.ajax({type:"GET",crossDomain:!0,url:CLIENT.Settings.getServlet(),data:{OPTION:"AJAX_ADD_FAVORITE",zl_id:"",zl_name:"",zli_save:"0","zli_name-0":data.title,"zli_sku-0":data.sku,"zli_value_codes-0":"URL","zli_value_URL-0":data.url},xhrFields:{withCredentials:!0},dataType:"jsonp",timeout:1e4,cache:!1}).then(function(response,textStatus,jqXHR){return response.success?jqXHR:$.Deferred.reject(jqXHR)}).done(function(){$(".nix-favorites").addClass("hover"),setTimeout(function(){$(".nix-favorites").removeClass("hover")},2e3),cta.addClass("in-favorites")}).done(CLIENT.Decorator.handleDynamicHeaderResponse).fail(function(response,textStatus){$.Log.error("Failed addToFavorites "+textStatus)})},bindMobilePagination:function(){$("#mobilePagingSelect").on("change",function(){var href=$(this).val();"undefined"!=typeof href&&-1==href.indexOf("javascript")&&(document.location.href=href)})},markFavorites:function(data){if("undefined"!=typeof data.favoriteSkus&&null!=data.favoriteSkus)for(var a=0;a<data.favoriteSkus.length;a++){var skuref=data.favoriteSkus[a];try{var visibleSku=$(".products-container").find(".item.primary img[data-skurefid='"+skuref+"']");visibleSku.length&&visibleSku.parents(".product-container").find(".cta-heart").addClass("in-favorites")}catch(e){}}},setCategory:function(categoryRef){CLIENT.Category.categoryRef=categoryRef},setGaCategory:function(taxonomy){CLIENT.Category.gaCategoryRef=taxonomy},getGaProductList:function(product,isRR){var list="";try{return list=product.parents("#rr-recommend-container").length?"Rich Recommendations":product.parents("#rr-recent-container").length?"Recently Viewed":product.parents("#featured-products").length?"Featured Products":"SEARCH"==CLIENT.Category.categoryRef.toUpperCase()?"Search Results":isRR?"Rich Sort Products":"Category Products"}catch(e){return list}},bindCarouselProductHotSpot:function(){$.Log.debug("CLIENT.Category.bindCarouselProductHotSpot"),$(".products-container").on("click",".product-hotspot",function(e){e.preventDefault(),e.stopImmediatePropagation();var product=$(this).parents(".nix-pcp-col"),img=$(this).parents(".product-container").find("div.item.primary > img"),richrecsCTA=$(this).attr("data-rrurl");if(1==img.length){var d=new Date,future=new Date(d.getTime()+18e5);$.cookie("lastCatRef",CLIENT.Category.categoryRef,{expires:future,domain:"."+window.location.host,path:"/"});
var goToUrl="",isRR=!1;if("undefined"!=typeof richrecsCTA&&null!=richrecsCTA)try{goToUrl=CLIENT.RichRelevance.getNewRrUrl(richrecsCTA,$(this).attr("data-href"),img.attr("data-skurefid")),isRR=!0}catch(e){goToUrl=$(this).attr("data-href")+"?sku="+img.attr("data-skurefid")}else goToUrl=$(this).attr("data-href")+"?sku="+img.attr("data-skurefid");if(goToUrl.length)if(CLIENT.Settings.gaEnhancedEC&&ga.loaded)try{var list=CLIENT.Category.getGaProductList(product,isRR),position=product.index();-1==position?position=1:position>=0&&(position+=1);var id=product.attr("data-prodref"),variant=product.attr("data-color"),name=product.attr("data-name"),category=CLIENT.Category.gaCategoryRef,searchTerm=void 0;if(-1!=list.indexOf("Search Results")){var q=$.getUrlVar("q");searchTerm=q}ga("ec:addProduct",{id:id,name:name,category:category,brand:"Nixon",variant:variant,position:position,dimension1:searchTerm}),ga("ec:setAction","click",{list:list}),ga("send","event",list,"click","product",{hitCallback:function(){document.location.href=goToUrl}})}catch(e){document.location.href=goToUrl}else document.location.href=goToUrl;else $.Log.error("goToUrl is empty")}})},isScrolledIntoView:function(elem){var docViewTop=$(window).scrollTop(),docViewBottom=docViewTop+$(window).height(),elemTop=$(elem).offset().top,elemBottom=elemTop+$(elem).height();return belowCalc=elemTop-docViewBottom,aboveCalc=docViewTop-elemBottom,belowCalc>-300&&belowCalc<=800||aboveCalc>-300&&aboveCalc<=800||docViewBottom>=elemBottom&&elemTop>=docViewTop},bindLazyCarouselLoad:function(){$.Log.debug("CLIENT.Category.bindMobileCarouselLoad"),$(window).scroll($.throttle(100,function(){CLIENT.Category.debounceIosScrollWatch()}))},bindCarouselCursor:function(o){var carouselOffsetX,carouselOffsetY,mouseX,mouseY;Modernizr.touch||(o.addClass("ospointer"),o.on("mouseenter",function(){carouselOffsetY=$(this).offset().top,carouselOffsetX=$(this).offset().left,$(this).mousemove(function(e){mouseX=e.pageX,mouseY=e.pageY,carouselOffsetX+90>=mouseX&&$(this).hasClass("pointer")?$(this).removeClass("pointer"):mouseX>carouselOffsetX+90&&carouselOffsetX+190>mouseX&&!$(this).hasClass("pointer")?$(this).addClass("pointer"):mouseX>=carouselOffsetX+190&&$(this).hasClass("pointer")&&$(this).removeClass("pointer")})}).on("mouseleave",function(){$(this).off("mousemove"),$(this).removeClass("pointer")}))},debounceIosScrollWatch:function(){$('.nix-carousel:not(".loaded")').each(function(){CLIENT.Category.isScrolledIntoView($(this))&&($(this).addClass("loaded"),CLIENT.Category.createCarousel($(this)))}),$('.single-color:not(".loaded")').each(function(){CLIENT.Category.isScrolledIntoView($(this))&&($(this).off("click").on("click",function(){$(this).parents(".product-container").find(".product-hotspot").trigger("click")}).on("mouseover",function(){$(this).css("cursor","pointer")}),CLIENT.Category.loadThumbs($(this).find("img")),$(this).closest(".prod-images").addClass("loaded"))})},getNextSixNotLoaded:function(){var els=$('.nix-carousel:not(".loaded"):lt(2)');els.length?els.each(function(){CLIENT.Category.createCarousel($(this))}):(clearInterval(CLIENT.Category.loaderInterval),CLIENT.Category.loaderInterval=null)},loaderInterval:null,mobileIosSliderLazyLoad:function(count){$.Log.debug("Loading "+count+" iosSliders at a time in the background"),CLIENT.Category.loaderInterval=setInterval(function(){CLIENT.Category.getNextSixNotLoaded(count)},1e3)},initOrResetStickable:function(){var $filterLeftCol=$("#filter-left-col"),hasStickable=$filterLeftCol.parent().hasClass("stickable-parent");$filterLeftCol.length>0&&(hasStickable===!0?$filterLeftCol.stickable.reset():$("#filter-left-col").stickable({bottomId:"product-category-divider",stickyBreakpoint:991,marginTop:60,marginBottom:20}))},createCarousel:function(el){if(el.hasClass("nix-carousel")){el.closest(".prod-images").addClass("loaded");var carousel=el,items=carousel.find(".item"),startSlide=carousel.find(".primary:first").index();if("-1"==startSlide){startSlide=1;var firstSlide=carousel.find(".item:first"),sku="";firstSlide.length&&(firstSlide.addClass("primary").find("img").removeClass("img-load-on-hover").addClass("img-load-on-view"),sku=firstSlide.find("img").attr("data-skurefid")),$.Log.error("No div.primary: "+sku+" cat: "+document.location.pathname+document.location.search)}else startSlide+=1;if(Modernizr.touch)var $imagesToLoad=el.find(".img-load-on-view, .img-load-on-hover").not(".loaded");else{CLIENT.Category.bindCarouselCursor(el);var $imagesToLoad=el.find(".img-load-on-view").not(".loaded")}if($imagesToLoad.each(function(){CLIENT.Category.loadThumbs($(this))}),items.length>1){infinite=items.length>2;try{2==items.length&&$(items[1]).hasClass("primary")&&(items.parent(".slider").html(items.reverse()),startSlide=1)}catch(er){}carousel.iosSlider({onSliderLoaded:function(args){current_carousel=args.data.obj,this_indicators=current_carousel.parents(".product-container").find(".upper_line .indicator"),item_nr=this_indicators.length,item_width=100/item_nr,this_indicators.each(function(i,elem){jQuery(elem).css("width",item_width+"%")}),current_carousel.addClass("loaded").removeClass("nix-carousel-hidden")},startAtSlide:startSlide,snapToChildren:!0,desktopClickDrag:!0,infiniteSlider:infinite,snapSlideCenter:!0,responsiveSlideContainer:!1,responsiveSlides:!1,navNextSelector:".next",navPrevSelector:".prev",onSlideChange:CLIENT.Category.changeSlideIdentifier,onSlideStart:CLIENT.iosSlider.changeSlideIconActive,onSlideComplete:CLIENT.Category.changeSlideIconDeactive,horizontalSlideLockThreshold:40,verticalSlideLockThreshold:20});var mc=new Hammer(carousel.get(0),{threshold:10});mc.on("tap",function(){carousel.parents(".product-container").find(".product-hotspot").trigger("click")})}}},changeSlideIconActive:function(args){$.Log.debug("CLIENT.Category.changeSlideIconActiveated");var slider=args.sliderObject,outputSpan=slider.parents(".display-prod").find(".cta-new");outputSpan.removeClass("active"),CLIENT.iosSlider.changeSlideIconActive.call(this,args)},changeSlideIconDeactive:function(args){$.Log.debug("CLIENT.Category.changeSlideIconDeactive");try{var slider=args.sliderObject,outputSpan=slider.parents(".display-prod").find(".new-badge"),isNewColor=args.currentSlideObject.find("img").attr("data-new"),isNewProduct=outputSpan.attr("data-new-product"),color=args.currentSlideObject.find("img").attr("data-color");if(slider.parents(".nix-pcp-col").attr("data-color",color),"true"!=isNewProduct&&("false"==isNewColor?outputSpan.removeClass("active"):"true"==isNewColor&&outputSpan.addClass("active").addClass("cta-new-color").removeClass("cta-new").find("span").html(CLIENT.Settings.alerts.category.newColor)),"undefined"!=typeof CLIENT.Decorator.userData){var favoriteSkus=CLIENT.Decorator.userData.favoriteSkus,primarySku=args.currentSlideObject,primaryImage=primarySku.find("img"),currentSku=primaryImage.attr("data-skurefid");try{"undefined"!=typeof favoriteSkus&&null!=favoriteSkus&&-1!=favoriteSkus.indexOf(currentSku)?primarySku.parents(".product-container").find(".cta-heart").addClass("in-favorites"):primarySku.parents(".product-container").find(".cta-heart").removeClass("in-favorites")}catch(ea){}}}catch(ee){}},thumbnailOpacity:function(){if(!Modernizr.touch){var $window=$(window),$productContainerGroup=$(".product-container-group");$(".product-container").hover(function(){$(this).parents(".product-container-group").addClass("hovered")},function(){$(this).parents(".product-container-group").removeClass("hovered")}),$window.scroll($.debounce(200,!0,function(){$productContainerGroup.addClass("scrolling")})),$window.scroll($.debounce(200,function(){$productContainerGroup.removeClass("scrolling")}))}},loadVisibleCarousels:function(){$.Log.debug("CLIENT.Category.loadVisibleCarousels"),$(".nix-carousel:in-viewport").each(function(){CLIENT.Category.createCarousel($(this))}),$(".single-color").off("click").on("click",function(){$(this).parents(".product-container").find(".product-hotspot").trigger("click")}).on("mouseover",function(){$(this).css("cursor","pointer")}),$(".single-color:in-viewport").each(function(){CLIENT.Category.isScrolledIntoView($(this))&&(CLIENT.Category.loadThumbs($(this).find("img")),$(this).closest(".prod-images").addClass("loaded"))})},loadThumbs:function(el){el.attr("src",el.attr("data-src")).removeClass("img-load-on-hover").removeClass("img-load-on-view").addClass("loaded")},changeSlideIdentifier:function(args){args.sliderObject.children().removeClass("primary"),args.targetSlideObject.addClass("primary"),args.targetSlideObject.parents(".product-container").find(".price span").html(args.targetSlideObject.find("img").data("price")),this_indicators=args.data.obj.parents(".product-container").find(".upper_line .indicator"),this_indicators.removeClass("active"),this_indicators.eq(args.targetSlideObject.index()).addClass("active")},bindQuickshopLinksAll:function(){CLIENT.Category.bindQuickshopLinksDesktop()},bindQuickshopLinksDesktop:function(){$(".products-display").on("click.qa-desktop",".launch-quickshop",function(e){e.preventDefault();var img=$(this).parents(".product-container").find("div.item.primary > img"),fileName=$(this).attr("data-modal-contents"),modalClassName=$(this).attr("data-modal-class"),parms=$(this).attr("data-modal-parms")+"&sku="+img.attr("data-skurefid"),secure=-1!=document.location.protocol.indexOf("https");return CLIENT.product.destroyMobilePdpSlider(),CLIENT.Modal.ajaxLoadPage(parms,fileName,modalClassName,secure,!1),!1})},unbindQuickshopLinksDesktop:function(){$(".products-display").off("click.qa-desktop",".launch-quickshop")},bindQuickshopLinksMobile:function(){$.Log.debug("CLIENT.Category.bindCartLinkClick"),$(".products-container").on("click.qa-mobile",".cta-cart",function(){$(this).parents(".product-container").find(".product-hotspot:first").trigger("click")})},unbindQuickshopLinksMobile:function(){$(".products-container").off("click.qa-mobile",".cta-cart")},bindFilterSortButtons:function(){var $filterContainer=$(".filter-container"),$sortContainer=$(".filter-sort-mobile-container"),$filterButtons=$(".filter-buttons");$(".nix-mbl-filter").on("click",function(e){var $this=$(this),type=$this.attr("data-ga-group"),event=$this.attr("data-ga-event"),filterValue=$this.attr("data-ga-val");if(e.preventDefault(),$this.hasClass("active")?($filterContainer.addClass("hidden").removeClass("filter-mobile-expanded-cat"),$this.removeClass("active"),filterValue+=" Off"):($filterButtons.removeClass("active"),$filterContainer.removeClass("hidden").addClass("filter-mobile-expanded-cat"),$sortContainer.addClass("hidden").removeClass("filter-mobile-expanded-cat"),$this.addClass("active"),filterValue+=" On"),ga.loaded&&(null!=type||null!=event||null!=filterValue))try{ga("send","event",type,event,filterValue)}catch(z){}}),$(".nix-mbl-sort").on("click",function(e){var $this=$(this);e.preventDefault(),$this.hasClass("active")?($sortContainer.addClass("hidden").removeClass("filter-mobile-expanded-cat"),$this.removeClass("active")):($filterButtons.removeClass("active"),$sortContainer.removeClass("hidden").addClass("filter-mobile-expanded-cat"),$filterContainer.addClass("hidden").removeClass("filter-mobile-expanded-cat"),$this.addClass("active"))}),$("#close-filters").on("click",function(){$(".nix-mbl-filter").trigger("click")}),$(".sort-track").on("click","a",function(e){var $link=$(this);e.preventDefault();var type=$link.attr("data-ga-group"),event=$link.attr("data-ga-event"),value=$link.attr("data-ga-val"),url=$link.attr("href");if(!ga.loaded||null==type&&null==event&&null==value)document.location.href=url;else try{ga("send","event",type,event,value,{hitCallback:function(){document.location.href=url}})}catch(z){document.location.href=url}}),$(window).resize($.debounce(500,function(){enquire.register("screen and (min-width: 992px)",{deferSetup:!0,match:function(){$filterContainer.removeClass("hidden").removeClass("filter-mobile-expanded-cat"),$sortContainer.removeClass("filter-mobile-expanded-cat").addClass("hidden"),$filterButtons.removeClass("active")}})}))},richRelevanceCallback:function(){var ar=null;try{ar=RR.data.JSON.placements;var maxSkus=4;if(CLIENT.RichRelevance.rrMax>0&&(maxSkus=CLIENT.RichRelevance.rrMax),"undefined"!=typeof ar)for(var x=0;x<ar.length;x++){var placement=ar[x],type=placement.placement_name;if(type.indexOf("rr1")>-1)var richRecs=placement;else if(type.indexOf("rvi")>-1)var richViews=placement;else if(type.indexOf("richsort")>-1)var rrSort=placement}CLIENT.Category.bindRichRelevanceLayers(richRecs,richViews),CLIENT.Category.doRichSort&&(rrSort?CLIENT.Category.runRichRelevanceSort(rrSort):($.Log.debug("No products returned for rrSort, show default products"),CLIENT.Category.setupPostSort(!1))),richRecs?CLIENT.RichRelevance.loadRecsForSkus(richRecs,$("#rr-recommend-container"),maxSkus):$.Log.debug("No products returned for richRecs"),richViews?CLIENT.RichRelevance.loadRecsForSkus(richViews,$("#rr-recent-container"),4):$.Log.debug("No products returned for richViews")}catch(e){CLIENT.Category.setupPostSort(!1)}},bindRichRelevanceLayers:function(recs,views){var rrContainer=$("#rich-relevance-wrap");if(recs||views){var gotBoth=!1;recs&&views&&(gotBoth=!0),recs&&(rrContainer.find("#rr-recommend-container").removeClass("hidden"),rrContainer.find("#recommend_tab").removeClass("hidden"),gotBoth||rrContainer.find("#recommend_tab").addClass("solo")),views&&(rrContainer.find("#rr-recent-container").removeClass("hidden"),rrContainer.find("#recent_tab").removeClass("hidden"),gotBoth||(rrContainer.find("#recent_tab").addClass("solo").addClass("tab_active"),rrContainer.find("#recommend_tab").removeClass("tab_active"),rrContainer.find("#rr-recommend-container").removeClass("tab_active_contents"),rrContainer.find("#rr-recent-container").addClass("tab_active_contents"))),$(".tab_active_contents").find(".nix-carousel").iosSlider("update"),rrContainer.removeClass("hidden"),rrContainer.parents(".products-display.landing_products_container.products-container").removeClass("hidden"),rrContainer.on("click touchstart",".richrecs",function(e){e.preventDefault();var $this=$(this);$this.hasClass("tab_active")||($(".richrecs").removeClass("tab_active"),$this.addClass("tab_active"),$(".extra-products-contents").toggleClass("tab_active_contents"),$(".tab_active_contents").find(".nix-carousel").iosSlider("update"),CLIENT.Category.loadVisibleCarousels())})}else;},runRichRelevanceSort:function(rrEl){try{var prodArray=$(".nix-pcp-col");if(prodArray.length){if("undefined"!=typeof rrEl&&"undefined"!=typeof rrEl.items)if(!rrEl.items.length>=prodArray.length)$.Log.debug("Length of sort items < length of products on the page.  Not sorting");else{$.Log.debug("Beginning Sort.");var loopItems=rrEl.items;if(CLIENT.RichRelevance.responseIsSkus){var showProducts=CLIENT.RichRelevance.groupProducts(loopItems,"sort");"undefined"!=typeof showProducts&&0!=showProducts.length&&(loopItems=showProducts)}var catContainer=$("#category-products"),origSize=catContainer.find(".nix-pcp-col").length,newOrder=[];$.each(loopItems,function(ii,o){var p=catContainer.find("[data-prodref='"+o.parent_id+"']");if(p.length){if(CLIENT.RichRelevance.linkToRrOnClick){var hotspot=p.find(".product-hotspot"),prodUrl=hotspot.attr("data-href"),skuref=p.find(".item.primary img").attr("data-skurefid");if(skuref&&prodUrl&&hotspot.length){var newRrUrl=CLIENT.RichRelevance.getNewRrUrl(o.linkURL,prodUrl,skuref);hotspot.attr("href",newRrUrl),hotspot.attr("data-rrUrl",o.linkURL)}}newOrder.push(p),p.addClass("sorted");var rrColor=p.find(".item:has(img[data-skurefid='"+o.id+"'])");if(rrColor.length&&!rrColor.hasClass("primary")){var pImg=rrColor.addClass("primary").find("img"),cid=pImg.attr("data-color");rrColor.siblings().removeClass("primary").find("img").removeClass("img-load-on-view").addClass("img-load-on-hover"),pImg.removeClass("img-load-on-hover").addClass("img-load-on-view"),pImg.parents(".nix-pcp-col").attr("data-color",cid),$.Log.debug("Changing color to : "+o.id)}else $.Log.debug("Skipping, already primary")}}),$.each(catContainer.find(".nix-pcp-col:not(.sorted)"),function(){newOrder.push($(this)),$(this).addClass("sorted")}),newOrder.length==origSize&&(catContainer.html(newOrder),CLIENT.Category.setupPostSort(!0))}}else $.Log.debug("No products found on page to sort, error?")}catch(e){CLIENT.Category.setupPostSort(!1)}},setupPostSort:function(success){if($.Log.debug("CLIENT.Category.setupPostSort"),$("#category-products").removeClass("hidden"),$(".loading.slow").hide(),CLIENT.iosSlider.init(),CLIENT.Category.thumbnailOpacity(),CLIENT.Category.loadVisibleCarousels(),CLIENT.Category.bindLazyCarouselLoad(),CLIENT.Category.bindCarouselProductHotSpot(),CLIENT.Category.bindFavoriteLinkClick(),"undefined"!=typeof window.R3_CATEGORY&&window.R3_CATEGORY.id){var RRRequestStop=(new Date).getTime(),timeDiff=RRRequestStop-RRRequestStart,succeed=success?"success":"fail",reportTime=timeDiff+" ms";reportTime=250>timeDiff?"< 250 ms":timeDiff>250&&500>=timeDiff?"< 500 ms":timeDiff>500&&750>=timeDiff?"< 750 ms":timeDiff>750&&1e3>=timeDiff?"< 1000 ms":timeDiff>1e3&&1500>=timeDiff?"< 1500 ms":timeDiff>1500&&2e3>=timeDiff?"< 2000 ms":"> 2000 ms",CLIENT.Category.sendGaEnhancedImpressions(success),ga("send","event","RichSort - "+succeed,window.R3_CATEGORY.id,reportTime,1)}success===!0&&CLIENT.Category.initOrResetStickable()},sendGaEnhancedImpressions:function(rr,productParentSelector){if($.Log.debug("CLIENT.Category.sendGaEnhancedImpressions"),!CLIENT.Settings.gaEnhancedEC)return void $.Log.debug("Returning, Enhanced E-Commerce not turned on");try{var products=$("undefined"==typeof productParentSelector?".landing_products_container .nix-pcp-col":productParentSelector+" .nix-pcp-col"),list=CLIENT.Category.getGaProductList(products,rr);products.each(function(){var el=$(this),position=el.index()+1,id=el.attr("data-prodref"),variant=el.attr("data-color"),name=el.attr("data-name"),category=el.parent().attr("data-gacategory"),searchTerm=void 0;if(-1!=list.indexOf("Search Results")){var q=$.getUrlVar("q");searchTerm=q}ga("ec:addImpression",{id:id,name:name,category:"undefined"==typeof category?CLIENT.Category.gaCategoryRef:category,brand:"Nixon",variant:variant,list:list,position:position,dimension1:searchTerm})})}catch(e){$.Log.debug(e)}}},function($){$.belowthefold=function(element,settings){var fold=$(window).height()+$(window).scrollTop();return fold<=$(element).offset().top-settings.threshold},$.abovethetop=function(element,settings){var top=$(window).scrollTop();return top>=$(element).offset().top+$(element).height()-settings.threshold},$.rightofscreen=function(element,settings){var fold=$(window).width()+$(window).scrollLeft();return fold<=$(element).offset().left-settings.threshold},$.leftofscreen=function(element,settings){var left=$(window).scrollLeft();return left>=$(element).offset().left+$(element).width()-settings.threshold},$.inviewport=function(element,settings){return!($.rightofscreen(element,settings)||$.leftofscreen(element,settings)||$.belowthefold(element,settings)||$.abovethetop(element,settings))},$.extend($.expr[":"],{"below-the-fold":function(a){return $.belowthefold(a,{threshold:0})},"above-the-top":function(a){return $.abovethetop(a,{threshold:0})},"left-of-screen":function(a){return $.leftofscreen(a,{threshold:0})},"right-of-screen":function(a){return $.rightofscreen(a,{threshold:0})},"in-viewport":function(a){return $.inviewport(a,{threshold:0})},"in-viewport-b":function(a){return $.inviewport(a,{threshold:400})}})}(jQuery);var CLIENT=window.CLIENT||{};CLIENT.RichRelevance={linkToRrOnClick:!0,responseIsSkus:!0,rrMax:0,stickyBottomId:"rich-relevance-wrap",returnedRecs:{},loadRecsForSkus:function(recs,container,maxSkus){if("undefined"!=typeof container&&container.length){var containerId=container.attr("id");if("undefined"!=typeof recs.items){if("undefined"==typeof maxSkus)var maxSkus=4;var loopItems=recs.items;if(CLIENT.RichRelevance.responseIsSkus){var showProducts=CLIENT.RichRelevance.groupProducts(loopItems,container.attr("id"),maxSkus);"undefined"!=typeof showProducts&&0!=showProducts.length&&(loopItems=showProducts)}var workManager=$.Deferred(),attempts=0,workDone=function(response){if(attempts>=3)return void workManager.resolve();if(attempts++,$.Log.debug("Attempt: "+attempts+", All done loading: "+response),response>=maxSkus)$.Log.debug("Have enough, found max of "+maxSkus+" skus. Resolving"),workManager.resolve();else if(maxSkus>response){var loadedCount=maxSkus-response,nextProducts=CLIENT.RichRelevance.findMoreProducts(recs.items,loopItems,containerId,maxSkus,loadedCount);nextProducts.length?(loopItems=loopItems.concat(nextProducts),$.Log.debug("Found "+nextProducts.length+" more products to try and load"),work=CLIENT.RichRelevance.addProductsToUi(recs.items,container,containerId,nextProducts,maxSkus),work.done(workDone)):($.Log.debug("Done trying"),workManager.resolve())}},work=CLIENT.RichRelevance.addProductsToUi(recs.items,container,containerId,loopItems,maxSkus);work.done(workDone);var sendRecentRecsImpressions=function(){CLIENT.Category.sendGaEnhancedImpressions(!0,"#"+containerId);var richList="rr-recommend-container"==containerId?"Rich Recommendations":"Recently Viewed";ga("send","event","Category","loaded",richList,{nonInteraction:1})};workManager.done(CLIENT.RichRelevance.resetStickableNav,sendRecentRecsImpressions,CLIENT.Category.thumbnailOpacity)}}},resetStickableNav:function(){$.Log.debug("CLIENT.RichRelevance.resetStickable <- if stickable didn't work, find this function.");var leftbar=$("#filter-left-col"),pdpSticky=$(".sticky-add-to-cart");try{leftbar.length&&(CLIENT.Category.initOrResetStickable(),$.Log.debug("$.stickable.reset(); Rich Relevance Loaded")),pdpSticky.length&&(CLIENT.product.addToCart.initOrResetStickyAddToCart(),$.Log.debug("$.stickable.reset(); Rich Relevance Loaded"))}catch(e){console.error("stickable not working correctly"),console.dir(e)}},findMoreProducts:function(allRecs,loopItems,containerId,maxSkus,loadedCount){var missingCount=maxSkus-loadedCount,additionalProducts=CLIENT.RichRelevance.groupProducts(allRecs,containerId,loopItems.length+missingCount);if(additionalProducts.length>loopItems.length){$.Log.debug("Product Array with "+missingCount+" additional products");var newProducts=additionalProducts.filter(function(s){for(var a=0;a<loopItems.length;a++)if(loopItems[a].id==s.id)return!1;return!0});return newProducts}return $.Log.debug("No additional products found"),[]},addProductsToUi:function(allRecs,container,containerId,loopItems,maxSkus){var deferred=$.Deferred();"undefined"==typeof CLIENT.RichRelevance.returnedRecs[containerId]&&(CLIENT.RichRelevance.returnedRecs[containerId]={});for(var reqs=[],i=0;i<loopItems.length&&maxSkus>i;i++){var skuref=loopItems[i].id,linkURL=loopItems[i].linkURL;reqs[i]=CLIENT.RichRelevance.getProduct(container,skuref,linkURL)}var addedSuccessfully=0;return $.when.apply($,reqs).done(function(){$.Log.debug("All "+containerId+" requests have returned, push them in to the DOM now in the order RR sent them");for(var a=0;a<loopItems.length&&maxSkus>a;a++){var sk=loopItems[a].id,prod=CLIENT.RichRelevance.returnedRecs[containerId][sk];if(prod){if(container.append(prod),prod.find(".product-container-single").length){var image=prod.find("img.img-load-on-view");CLIENT.Category.loadThumbs(image),image.closest(".prod-images").addClass("loaded")}else CLIENT.iosSlider.hoverLazyLoad(prod.find(".product-container")),CLIENT.Category.createCarousel(prod.find(".nix-carousel"));addedSuccessfully++}}}).always(function(){$.Log.debug("resolving deferred with : "+addedSuccessfully),deferred.resolve(addedSuccessfully)}),deferred},getProduct:function(container,skuref,linkURL){return $.ajax({url:CLIENT.Settings.getHost()+"/slider/sku/"+skuref}).done(CLIENT.RichRelevance.handleProductResponse(container,skuref,linkURL))},handleProductResponse:function(container,skuref,linkURL){return function(response){var goToRr=CLIENT.RichRelevance.linkToRrOnClick,prod=$(response);if(prod.hasClass("nix-pcp-col")){if(goToRr){var rrOriginalUrl=linkURL,prodUrl=prod.find(".product-hotspot").attr("data-href"),newRrUrl=CLIENT.RichRelevance.getNewRrUrl(rrOriginalUrl,prodUrl,skuref),hotspot=prod.find(".product-hotspot");hotspot.attr("href",newRrUrl),hotspot.attr("data-rrUrl",rrOriginalUrl)}CLIENT.RichRelevance.returnedRecs[container.attr("id")][skuref]=prod,$.Log.debug("Added "+skuref+" to "+container.attr("id"))}}},getNewRrUrl:function(url,prodUrl,skuRef){var queries,split,i,parser=document.createElement("a"),searchObject={};for(parser.href=url,queries=parser.search.replace(/^\?/,"").split("&"),i=0;i<queries.length;i++)split=queries[i].split("="),searchObject[split[0]]=split[1];var cleanProdUrl=prodUrl;if("function"==typeof removeDiacritics)try{cleanProdUrl=removeDiacritics(prodUrl)}catch(e){}searchObject.ct=CLIENT.Settings.getBaseHost()+cleanProdUrl+"?sku="+skuRef,searchObject.p=skuRef;var sep="";return 0!=parser.pathname.indexOf("/")&&(sep="/"),parser.protocol+"//"+parser.hostname+sep+parser.pathname+"?"+$.param(searchObject)},groupProducts:function(skus,container,maxSkus){if("undefined"!=typeof skus){var prods=[],prodStruct={};if("undefined"==typeof maxSkus)var maxSkus=200;$.Log.debug("Grouping skus from RichRelevance in to products.  Need to find "+maxSkus);for(var i=0;i<skus.length;i++){var productId=skus[i].parent_id,skuId=skus[i].id;if("undefined"==typeof productId&&"undefined"!=typeof skuId&&(productId=CLIENT.RichRelevance.prodFromSku(skuId)),"undefined"!=typeof productId&&"undefined"!=typeof skuId&&"undefined"==typeof prodStruct[productId]&&(skus[i].parent_id=productId,prods.push(skus[i]),prodStruct[productId]=!0,$.Log.debug("Adding "+skuId+" to return array")),prods.length>=maxSkus){$.Log.debug("Found "+maxSkus+" products to use in "+container+" continuing");break}}return prods}$.Log.debug("No skus submitted.")},watch:/(A[0-9]{3})[0-9\-]+/,kswatch:/(A[0-9]{3}KS)[0-9\-]+/,acc3:/(M[0-9]{4})[0-9\-]+/,acc2:/(C(015|034))[0-9\-]+/,acc:/(C[0-9]{4})[0-9\-]+/,clothing:/(S[0-9]{4})[0-9\-]+/,audio:/(H[0-9]{3})[0-9\-]+/,prodFromSku:function(skuref){return skuref.match(CLIENT.RichRelevance.kswatch)?skuref.match(CLIENT.RichRelevance.kswatch)[1]:skuref.match(CLIENT.RichRelevance.watch)?skuref.match(CLIENT.RichRelevance.watch)[1]:skuref.match(CLIENT.RichRelevance.acc3)?skuref.match(CLIENT.RichRelevance.acc3)[1]:skuref.match(CLIENT.RichRelevance.acc2)?skuref.match(CLIENT.RichRelevance.acc2)[1]:skuref.match(CLIENT.RichRelevance.acc)?skuref.match(CLIENT.RichRelevance.acc)[1]:skuref.match(CLIENT.RichRelevance.clothing)?skuref.match(CLIENT.RichRelevance.clothing)[1]:skuref.match(CLIENT.RichRelevance.audio)?skuref.match(CLIENT.RichRelevance.audio)[1]:void 0},loadProductSliderFromSkuIdList:function($productContainer,skus){$productContainer.length&&(skus.length>0?$.each(skus,function(a){if("undefined"!=typeof skus&&"undefined"!=typeof skus[a]){var urlVar="",skuProdVar="sku",refid=skus[a];-1!=skus[a].search("-")?urlVar=CLIENT.Settings.getHost()+"/slider/sku/"+skus[a]:(urlVar=CLIENT.Settings.getHost()+"/slider/product/"+skus[a],skuProdVar="prod");{$.ajax({url:urlVar}).then(function(response,textStatus,jqXHR){var prod=$($.trim(response));return prod.hasClass("nix-pcp-col")?jqXHR:$.Deferred().reject(response)}).done(function(response){var prod=$($.trim(response)),prodDetails=prod.find(".prod-details"),appendedButton="<button type='button' class='olapic-shop-now nix-btn nix-btn-dark'>"+CLIENT.Settings.alerts.olapic.shopNow+"</button>";if($(appendedButton).insertAfter(prodDetails),$productContainer.append(prod),$productContainer.append("sku"==skuProdVar?"<span class='loadSkuSuccess hide' data-prod-refid='"+refid+"'>loadSuccess</span>":"<span class='loadProdSuccess hide' data-prod-refid='"+refid+"'>loadSuccess</span>"),prod.find(".product-container-single").length){var image=prod.find(".item.single-color img");CLIENT.Category.loadThumbs(image),image.closest(".prod-images").addClass("loaded")}else CLIENT.iosSlider.hoverLazyLoad(prod.find(".product-container")),CLIENT.Category.createCarousel(prod.find(".nix-carousel"))}).fail(function(){$productContainer.append("sku"==skuProdVar?"<span class='loadSku404 hide' data-prod-refid='"+refid+"'>sku404</span>":"<span class='loadProduct404 hide' data-prod-refid='"+refid+"'>prod404</span>")})}}else $productContainer.append("<span class='loadSku404 hide'>sku404</span>")}):$productContainer.append("<span class='loadSku404 hide'>sku404</span>"))}};